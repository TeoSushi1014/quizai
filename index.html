<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
    
    <!-- Performance optimizations: DNS prefetch and preconnect -->
    <link rel="dns-prefetch" href="//fonts.googleapis.com">
    <link rel="dns-prefetch" href="//esm.sh">
    <link rel="dns-prefetch" href="//jbuqonmeorldgiwvdror.supabase.co">
    <link rel="dns-prefetch" href="//www.google.com">
    <link rel="dns-prefetch" href="//accounts.google.com">
    
    <!-- Critical preconnects with crossorigin -->
    <link rel="preconnect" href="https://fonts.googleapis.com" crossorigin>
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link rel="preconnect" href="https://esm.sh" crossorigin>
    <link rel="preconnect" href="https://jbuqonmeorldgiwvdror.supabase.co" crossorigin>
    <link rel="preconnect" href="https://www.google.com" crossorigin>
    <link rel="preconnect" href="https://accounts.google.com" crossorigin>
    
    <!-- Font optimization - don't use preload to avoid warnings -->
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap">
    
    <link rel="icon" href="/quizai/assets/logo/avt.ico" type="image/x-icon" />
    <meta name="theme-color" content="#ffffff">
    
    <!-- Modulepreload for critical JS -->
    <link rel="modulepreload" href="data:application/octet-stream;base64,aW1wb3J0IFJlYWN0LCB7IFN1c3BlbnNlLCB1c2VFZmZlY3QgfSBmcm9tICdyZWFjdCc7CmltcG9ydCBSZWFjdERPTSBmcm9tICdyZWFjdC1kb20vY2xpZW50JzsKaW1wb3J0ICcuL2luZGV4LmNzcyc7CmltcG9ydCB7IGNoZWNrRGF0YWJhc2VTZXR1cCwgcHJpbnREYXRhYmFzZVN0YXR1cyB9IGZyb20gJy4vdXRpbHMvc2V0dXBEYXRhYmFzZSc7CmltcG9ydCB7IGxvZ2dlciB9IGZyb20gJy4vc2VydmljZXMvbG9nU2VydmljZSc7CmltcG9ydCBBcHAgZnJvbSAnLi9BcHAnOwppbXBvcnQgeyBIYXNoUm91dGVyIH0gZnJvbSAncmVhY3Qtcm91dGVyLWRvbSc7CmltcG9ydCB7IEdvb2dsZU9BdXRoUHJvdmlkZXIgfSBmcm9tICdAcmVhY3Qtb2F1dGgvZ29vZ2xlJzsKaW1wb3J0IHsgVGhlbWVQcm92aWRlciB9IGZyb20gJy4vY29udGV4dHMvVGhlbWVDb250ZXh0JzsKCmlmICgncGVyZm9ybWFuY2UnIGluIHdpbmRvdykgewogIHBlcmZvcm1hbmNlLm1hcmsoJ2FwcC1yZW5kZXItc3RhcnQnKTsKfQoKLy8gQ2hlY2sgZGF0YWJhc2Ugc2V0dXAgaW4gZGV2ZWxvcG1lbnQgbW9kZQppZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgPT09ICdkZXZlbG9wbWVudCcpIHsKICAoYXN5bmMgKCkgPT4gewogICAgdHJ5IHsKICAgICAgY29uc3QgZGJTdGF0dXMgPSBhd2FpdCBjaGVja0RhdGFiYXNlU2V0dXAoKTsKICAgICAgaWYgKCFkYlN0YXR1cy5pc1NldHVwKSB7CiAgICAgICAgY29uc29sZS53YXJuKCfimqDvuI8gRGF0YWJhc2Ugc2V0dXAgaXMgaW5jb21wbGV0ZS4gU2VlIGRhdGFiYXNlLnNxbCBmb3Igc2V0dXAgaW5zdHJ1Y3Rpb25zLicpOwogICAgICAgIGNvbnNvbGUuaW5mbyhkYlN0YXR1cy5tZXNzYWdlKTsKICAgICAgfSBlbHNlIHsKICAgICAgICBjb25zb2xlLmluZm8oJ+KchSBEYXRhYmFzZSBpcyBwcm9wZXJseSBzZXQgdXAuJyk7CiAgICAgIH0KICAgIH0gY2F0Y2ggKGVycm9yKSB7CiAgICAgIGNvbnNvbGUuZXJyb3IoJ0ZhaWxlZCB0byBjaGVjayBkYXRhYmFzZSBzZXR1cDonLCBlcnJvcik7CiAgICB9CiAgfSkoKTsKfQoKY29uc3QgTWluaW1hbExvYWRlciA9ICgpID0+ICgKICA8ZGl2IHN0eWxlPXt7CiAgICBwb3NpdGlvbjogJ2ZpeGVkJywKICAgIGluc2V0OiAwLAogICAgZGlzcGxheTogJ2ZsZXgnLAogICAgYWxpZ25JdGVtczogJ2NlbnRlcicsCiAgICBqdXN0aWZ5Q29udGVudDogJ2NlbnRlcicsCiAgICBiYWNrZ3JvdW5kQ29sb3I6ICd2YXIoLS1jb2xvci1iZy1ib2R5LCAjZmZmKScsCiAgICBjb2xvcjogJ3ZhcigtLWNvbG9yLXRleHQtcHJpbWFyeSwgIzMzMyknLAogICAgZm9udEZhbWlseTogJ3N5c3RlbS11aSwgLWFwcGxlLXN5c3RlbSwgc2Fucy1zZXJpZicsCiAgfX0+CiAgICA8ZGl2IHN0eWxlPXt7IGRpc3BsYXk6ICdmbGV4JywgZmxleERpcmVjdGlvbjogJ2NvbHVtbicsIGFsaWduSXRlbXM6ICdjZW50ZXInIH19PgogICAgICA8ZGl2IHN0eWxlPXt7CiAgICAgICAgd2lkdGg6ICczNnB4JywKICAgICAgICBoZWlnaHQ6ICczNnB4JywKICAgICAgICBib3JkZXI6ICczcHggc29saWQgcmdiYSgwLDAsMCwwLjEpJywKICAgICAgICBib3JkZXJSYWRpdXM6ICc1MCUnLAogICAgICAgIGJvcmRlclRvcENvbG9yOiAnIzNiODJmNicsCiAgICAgICAgYW5pbWF0aW9uOiAnc3BpbiAwLjhzIGxpbmVhciBpbmZpbml0ZScsCiAgICAgIH19PjwvZGl2PgogICAgICA8c3R5bGU+e2AKICAgICAgICBAa2V5ZnJhbWVzIHNwaW4gewogICAgICAgICAgdG8geyB0cmFuc2Zvcm06IHJvdGF0ZSgzNjBkZWcpOyB9CiAgICAgICAgfQogICAgICBgfTwvc3R5bGU+CiAgICAgIDxkaXYgc3R5bGU9e3sgbWFyZ2luVG9wOiAnMTZweCcsIGZvbnRTaXplOiAnMTRweCcgfX0+TG9hZGluZy4uLjwvZGl2PgogICAgPC9kaXY+CiAgPC9kaXY+Cik7CgovLyBFeHBvc2UgZGF0YWJhc2UgY2hlY2sgZnVuY3Rpb24gdG8gd2luZG93IGZvciBkZWJ1Z2dpbmcgcHVycG9zZXMKaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WID09PSAnZGV2ZWxvcG1lbnQnKSB7CiAgKHdpbmRvdyBhcyBhbnkpLmNoZWNrRGF0YWJhc2VTZXR1cCA9IGNoZWNrRGF0YWJhc2VTZXR1cDsKICAod2luZG93IGFzIGFueSkucHJpbnREYXRhYmFzZVN0YXR1cyA9IHByaW50RGF0YWJhc2VTdGF0dXM7Cn0KCi8vIFJlbmRlciBhcHBsaWNhdGlvbiB3aXRoIGRpcmVjdCBpbXBvcnQgb2YgQXBwIGluc3RlYWQgb2YgbGF6eSBsb2FkaW5nCi8vIFRoaXMgZW5zdXJlcyBjb250ZXh0IGlzIHByb3Blcmx5IGluaXRpYWxpemVkIGJlZm9yZSBiZWluZyB1c2VkClJlYWN0RE9NLmNyZWF0ZVJvb3QoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Jvb3QnKSBhcyBIVE1MRWxlbWVudCkucmVuZGVyKAogIDxSZWFjdC5TdHJpY3RNb2RlPgogICAgPFN1c3BlbnNlIGZhbGxiYWNrPXs8TWluaW1hbExvYWRlciAvPn0+CiAgICAgIDxUaGVtZVByb3ZpZGVyPgogICAgICAgIDxIYXNoUm91dGVyPgogICAgICAgICAgPEFwcCAvPgogICAgICAgIDwvSGFzaFJvdXRlcj4KICAgICAgPC9UaGVtZVByb3ZpZGVyPgogICAgPC9TdXNwZW5zZT4KICA8L1JlYWN0LlN0cmljdE1vZGU+Cik7CgppZiAoJ3BlcmZvcm1hbmNlJyBpbiB3aW5kb3cpIHsKICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignbG9hZCcsICgpID0+IHsKICAgIHBlcmZvcm1hbmNlLm1hcmsoJ2FwcC1yZW5kZXItZW5kJyk7CiAgICBwZXJmb3JtYW5jZS5tZWFzdXJlKCdhcHAtcmVuZGVyJywgJ2FwcC1yZW5kZXItc3RhcnQnLCAnYXBwLXJlbmRlci1lbmQnKTsKICB9KTsKfQo=" fetchpriority="high">
    
    <!-- Import map for external dependencies -->

    
    <title>QuizAI</title>
    
    <!-- Inline loader styles to prevent FOUC -->
    <style>
      :root{
        color-scheme:light dark;
      }
      #initial-loader{
        align-items:center;
        background-color:var(--color-bg-default, #fff);
        display:flex;
        flex-direction:column;
        height:100%;
        justify-content:center;
        left:0;
        position:fixed;
        top:0;
        transition:opacity .2s ease-out;
        width:100%;
        z-index:9999;
      }
      .loader-spinner{
        animation:loader-spin 1s linear infinite;
        border:3px solid rgba(0,0,0,.1);
        border-radius:50%;
        border-top:3px solid var(--color-primary-accent, #0969da);
        height:40px;
        width:40px;
      }
      .loader-text{
        color:var(--color-text-secondary, #57606a);
        font-family:system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,sans-serif;
        font-size:14px;
        margin-top:16px;
      }
      @keyframes loader-spin{
        to{ transform:rotate(1turn); }
      }
      @media (prefers-color-scheme:dark){
        #initial-loader{
          background-color:#0d1117;
        }
        .loader-text{
          color:#8b949e;
        }
      }
      @media (forced-colors:active){
        .loader-spinner{
          border-color:Highlight CanvasText CanvasText;
        }
        .loader-text{
          color:CanvasText;
        }
      }
    </style>
    <script type="importmap">
    {
      "imports": {
        "react": "https://esm.sh/react@^19.1.0",
        "react-dom": "https://esm.sh/react-dom@^19.1.0",
        "react/": "https://esm.sh/react@^19.1.0/",
        "react-dom/": "https://esm.sh/react-dom@^19.1.0/",
        "react-router-dom": "https://esm.sh/react-router-dom@^7.6.2",
        "@headlessui/react": "https://esm.sh/@headlessui/react@^2.1.2",
        "framer-motion": "https://esm.sh/framer-motion@^12.16.0"
      }
    }
    </script>
    <script type="module" crossorigin src="/quizai/assets/index-QP2H5jJ9.js"></script>
    <link rel="modulepreload" crossorigin href="/quizai/assets/katex-core-BbYO2yyT.js">
    <link rel="modulepreload" crossorigin href="/quizai/assets/katex-extras-AZS8NW-4.js">
    <link rel="modulepreload" crossorigin href="/quizai/assets/feature-quiz-2SquOiTn.js">
    <link rel="modulepreload" crossorigin href="/quizai/assets/router-Dk7yDelZ.js">
    <link rel="modulepreload" crossorigin href="/quizai/assets/ui-framework-CdNWeEQR.js">
    <link rel="modulepreload" crossorigin href="/quizai/assets/feature-quiz-components-CChsAlA6.js">
    <link rel="modulepreload" crossorigin href="/quizai/assets/feature-quiz-sharedquiz-Clu9xfzS.js">
    <link rel="modulepreload" crossorigin href="/quizai/assets/util-document-Dv5rbOR1.js">
    <link rel="modulepreload" crossorigin href="/quizai/assets/util-storage-UFVse9kk.js">
    <link rel="modulepreload" crossorigin href="/quizai/assets/util-pdf-CkIVnOzu.js">
    <link rel="modulepreload" crossorigin href="/quizai/assets/google-services-Bc_loC93.js">
    <link rel="modulepreload" crossorigin href="/quizai/assets/services-BHj8px4z.js">
    <link rel="modulepreload" crossorigin href="/quizai/assets/service-supabase-wASzC9XA.js">
    <link rel="modulepreload" crossorigin href="/quizai/assets/feature-quiz-home-Ch5jepSG.js">
    <link rel="modulepreload" crossorigin href="/quizai/assets/feature-quiz-dashboard-C8yrEGC7.js">
    <link rel="modulepreload" crossorigin href="/quizai/assets/markdown-processors-D3jN8hOQ.js">
    <link rel="modulepreload" crossorigin href="/quizai/assets/react-markdown-Cej2CoYR.js">
    <link rel="modulepreload" crossorigin href="/quizai/assets/app-components-CFPFxe5x.js">
    <link rel="modulepreload" crossorigin href="/quizai/assets/core-react-DcE6uGcR.js">
    <link rel="stylesheet" crossorigin href="/quizai/assets/katex-extras-Z53fddTf.css">
    <link rel="stylesheet" crossorigin href="/quizai/assets/app-components-CL2IDdOq.css">
    <link rel="stylesheet" crossorigin href="/quizai/assets/markdown-styles-T-m_OsNd.css">
    <link rel="stylesheet" crossorigin href="/quizai/assets/index-CR_Nab7_.css">
  </head>
  <body>
    <!-- Initial loader -->
    <div id="initial-loader">
      <div class="loader-spinner"></div>
      <div class="loader-text">Loading QuizAI...</div>
    </div>
    
    <!-- Root element for React -->
    <div id="root"></div>
    
    <!-- Core JS -->
    <script defer src="/quizai/env-config.js"></script>
    
    <!-- More efficient loader handling -->
    <script>
      // Performance marks for measuring load time
      if ('performance' in window) {
        performance.mark('app-init-start');
      }
      
      // Hide loader efficiently when app is ready
      document.addEventListener('DOMContentLoaded', function() {
        const loader = document.getElementById('initial-loader');
        if (loader) {
          const hideLoader = () => {
            loader.style.opacity = '0';
            setTimeout(() => loader.remove(), 200);
          };
          
          // Use requestIdleCallback with shorter timeout
          if ('requestIdleCallback' in window) {
            window.requestIdleCallback(hideLoader, { timeout: 500 });
          } else {
            window.requestAnimationFrame(hideLoader);
          }
        }
      });
      
      // Performance observer with limited output
      if ('PerformanceObserver' in window) {
        try {
          let lastLogTime = 0;
          const LOG_THROTTLE_MS = 2000; // Only log every 2 seconds
          
          const observer = new PerformanceObserver((list) => {
            const now = performance.now();
            for (const entry of list.getEntries()) {
              // Only log significant long tasks (> 150ms) and throttle logging
              if (entry.duration > 150 && now - lastLogTime > LOG_THROTTLE_MS) {
                console.debug('Long task detected:', entry.duration.toFixed(2) + 'ms', entry);
                lastLogTime = now;
              }
            }
          });
          observer.observe({ entryTypes: ['longtask'] });
        } catch (e) {
          console.debug('Performance observer not supported');
        }
      }
    </script>
  </body>
</html>