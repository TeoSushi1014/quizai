import{a as G,r as i,u as X,b as H,c as K,j as e,C as P,B as l,f as d,E as V,S as W,D as Y,M as D,X as Z,g as Q,I as q}from"./index-DcfiZvdk.js";import{M as u}from"./MathText-Bdaeuop9.js";const h={shuffleQuestions:!1,shuffleAnswers:!1,timeLimit:0},se=({quiz:s,onDelete:M,onEditQuiz:L,animationDelay:E})=>{var I,T;const{t,language:O}=G(),[g,m]=i.useState(!1),[j,x]=i.useState(!1),[o,N]=i.useState(h),{setActiveQuiz:z,setQuizResult:F}=X(),C=H(),w=i.useRef(null),b=K(w,{threshold:.1}),r=(I=s.config)==null?void 0:I.difficulty;let c;r==="Easy"||r==="Medium"||r==="Hard"?c=`step2Difficulty${r}`:c="dashboardQuizCardDifficulty";const $=t(c),B=new Date(s.createdAt).toLocaleDateString(O,{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),y=a=>{const n=localStorage.getItem(`attemptSettings_${a}`);if(n)try{return JSON.parse(n)}catch(f){return console.error("Failed to parse stored attempt settings:",f),h}return h},R=()=>{m(!0)},U=()=>{M(s.id),m(!1)},v=i.useCallback(()=>{m(!1)},[]),_=()=>{N(y(s.id)),x(!0)},S=i.useCallback(()=>{x(!1)},[]),p=(a,n)=>{N(f=>({...f,[a]:n}))},J=()=>{try{localStorage.setItem(`attemptSettings_${s.id}`,JSON.stringify(o))}catch(a){console.error("Failed to save attempt settings to localStorage:",a)}x(!1)},k=a=>{const n=y(s.id);z(s),a==="take"?(F(null),C(`/quiz/${s.id}`,{state:{attemptSettings:n}})):C(`/practice/${s.id}`,{state:{attemptSettings:n}})},A="https://img.icons8.com/?size=256&id=s5NUIabJrb4C&format=png";return e.jsxs(e.Fragment,{children:[e.jsx("div",{ref:w,className:`h-full ${b?"animate-fadeInUp":"opacity-0"}`,style:{animationDelay:b?E:void 0},children:e.jsxs(P,{className:"flex flex-col justify-between group relative overflow-hidden !p-0 !rounded-2xl h-full card-float-hover",useGlassEffect:!0,children:[e.jsxs("div",{className:"p-5 sm:p-6 flex-grow pb-4",children:[e.jsx("h3",{className:"text-lg sm:text-xl font-semibold text-slate-50 mb-3 group-hover:text-sky-300 line-clamp-2 transition-colors var(--duration-fast) var(--ease-ios)",title:s.title,children:e.jsx(u,{text:s.title})}),e.jsxs("div",{className:"mb-4 space-y-2.5",children:[e.jsxs("div",{className:"text-xs text-slate-400 flex items-center flex-wrap gap-x-3.5 gap-y-1.5",children:[e.jsx("span",{className:"font-medium text-slate-300",children:t("dashboardQuizCardQuestions",{count:s.questions.length})}),e.jsx("span",{className:"text-slate-600 text-lg",children:"•"}),e.jsx("span",{className:"px-2.5 py-1 rounded-full text-xs font-semibold shadow-sm bg-sky-400/20 text-sky-300",children:$}),((T=s.config)==null?void 0:T.language)&&e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"text-slate-600 text-lg",children:"•"}),e.jsx("span",{className:"uppercase text-[0.7rem] font-bold tracking-wider px-2.5 py-1 rounded-full shadow-sm bg-indigo-400/20 text-indigo-300",children:s.config.language.substring(0,2)})]})]}),s.sourceContentSnippet&&e.jsxs("p",{className:"text-xs text-slate-500 italic line-clamp-1",title:s.sourceContentSnippet,children:[t("dashboardQuizCardSource",{snippet:""}),e.jsx(u,{text:s.sourceContentSnippet})]}),e.jsx("p",{className:"text-xs text-slate-500 pt-1.5",children:t("dashboardQuizCardCreated",{date:B})})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 items-center justify-between mt-auto border-t border-slate-700/50 p-4 sm:p-5 bg-slate-800/30 rounded-b-2xl",children:[e.jsxs("div",{className:"flex flex-wrap gap-x-3 gap-y-2 w-full sm:w-auto justify-center sm:justify-start",children:[e.jsx(l,{size:"sm",variant:"primary",onClick:()=>k("take"),className:"flex-grow xs:flex-grow-0 shadow-lg hover:shadow-sky-400/40 py-2 px-4 rounded-lg",children:t("dashboardQuizCardTakeQuiz")}),e.jsx(l,{size:"sm",variant:"secondary",onClick:()=>k("practice"),className:"flex-grow xs:flex-grow-0 py-2 px-4 rounded-lg bg-purple-500/80 hover:bg-purple-500/100 text-white hover:shadow-purple-400/40",children:t("practiceModeCardButton")}),e.jsx(d,{content:t("edit"),wrapperClassName:"inline-flex flex-grow xs:flex-grow-0",children:e.jsx(l,{size:"sm",variant:"outline",onClick:()=>L(s),className:"w-full py-2 px-4 rounded-lg border-slate-500/70 hover:border-sky-400","aria-label":t("edit"),children:e.jsx(V,{className:"w-4 h-4"})})}),e.jsx(d,{content:t("settings"),wrapperClassName:"inline-flex flex-grow xs:flex-grow-0",children:e.jsx(l,{size:"sm",variant:"outline",onClick:_,className:"w-full py-2 px-4 rounded-lg border-slate-500/70 hover:border-sky-400","aria-label":t("settings"),children:e.jsx("img",{src:A,alt:t("settings"),className:"w-4 h-4"})})})]}),e.jsxs("div",{className:"flex items-center gap-1.5 w-full sm:w-auto justify-center sm:justify-end",children:[e.jsx(d,{content:t("share"),wrapperClassName:"inline-flex",children:e.jsx(l,{size:"sm",variant:"ghost",onClick:()=>alert(t("dashboardShareAlert",{quizId:s.id})),className:"text-slate-400 hover:text-green-400 !p-2.5 rounded-lg",children:e.jsx(W,{className:"w-4 h-4"})})}),e.jsx(d,{content:t("delete"),wrapperClassName:"inline-flex",children:e.jsx(l,{size:"sm",variant:"ghost",onClick:R,className:"text-slate-400 hover:text-red-500 !p-2.5 rounded-lg",children:e.jsx(Y,{className:"w-4 h-4"})})})]})]})]})}),g&&e.jsx(D,{isOpen:g,onClose:v,title:t("confirmDeletionTitle"),size:"md",footerContent:e.jsxs("div",{className:"flex justify-end gap-3.5",children:[e.jsx(l,{variant:"secondary",onClick:v,size:"md",children:t("cancel")}),e.jsx(l,{variant:"danger",onClick:U,size:"md",children:t("confirmDeleteButton")})]}),children:e.jsxs("div",{className:"flex items-start",children:[e.jsx(Z,{className:"w-10 h-10 text-red-400/80 mr-4 flex-shrink-0 mt-1"}),e.jsx("p",{className:"text-slate-200 text-base leading-relaxed",children:e.jsx(u,{text:t("confirmDeletionMessage",{quizName:s.title})})})]})}),j&&e.jsx(D,{isOpen:j,onClose:S,title:e.jsxs("div",{className:"flex items-center",children:[e.jsx("img",{src:A,alt:t("settings"),className:"w-6 h-6 mr-3"}),t("attemptSettingsModalTitle")]}),size:"lg",footerContent:e.jsxs("div",{className:"flex flex-col sm:flex-row justify-end gap-3.5",children:[e.jsx(l,{variant:"secondary",onClick:S,size:"md",className:"w-full sm:w-auto",children:t("cancel")}),e.jsx(l,{variant:"primary",onClick:J,size:"md",className:"w-full sm:w-auto",children:t("saveSettingsButtonText")})]}),children:e.jsxs("div",{className:"space-y-6 p-2",children:[e.jsx(Q,{label:t("attemptShuffleQuestionsLabel"),checked:o.shuffleQuestions,onChange:a=>p("shuffleQuestions",a),labelClassName:"font-medium text-slate-100"}),e.jsx(Q,{label:t("attemptShuffleAnswersLabel"),checked:o.shuffleAnswers,onChange:a=>p("shuffleAnswers",a),labelClassName:"font-medium text-slate-100"}),e.jsx(q,{label:e.jsx("span",{className:"font-medium text-slate-100",children:t("attemptTimeLimitLabel")}),type:"number",value:o.timeLimit,onChange:a=>p("timeLimit",parseInt(a.target.value,10)>=0?parseInt(a.target.value,10):0),min:"0",inputClassName:"text-sm",containerClassName:"mt-1"}),e.jsx("p",{className:"text-xs text-slate-400 -mt-4 pl-1",children:t("attemptTimeLimitInfo")})]})})]})};export{se as Q};
