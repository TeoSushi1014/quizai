import{j as a,m as le}from"./ui-BGuvgkTr.js";import{b as ce,u as de,r as y,f as ue}from"./router-BxjC687J.js";import{g as q,r as pe,b as M,u as xe,t as me,l as w,v as $,L as fe,C as R,N as ge,M as G,B as E,A as ve,H as he,E as we,w as ye,e as Z,D as Ee,p as ze,j as J,a as be,x as Ne,T as B,y as V,h as _,z as Qe,S as H,k as Ie,F as Te}from"./index-DeIFN2og.js";import"./vendor-DoC2WAmd.js";import"./utils-rUpm7H1u.js";import"./markdown-Bj7tmv2T.js";const C=e=>{if(!e)return"NB";switch(e){case"Easy":return"NB";case"Medium":return"TH";case"Hard":return"VD";case"AI-Determined":return"NB";default:return"NB"}},L=e=>String.fromCharCode(65+e),P=(e,r,t,i,s=!1)=>{const u=e.questionText;let p=i;const f=u.match(/\(?\[?([A-Z]{2,3})[\]\)]?\.?\s/i);f&&f[1]&&(p=f[1].toUpperCase());let d=`${t("azotaFormatQuestionPrefix")} ${r}.(${p}) ${u}
`;return e.options.forEach((h,g)=>{const b=h===e.correctAnswer;d+=`${s&&b?"*":""}${L(g)}. ${h}	`,(g+1)%2===0&&g<e.options.length-1&&e.options.length>2?d=d.trimEnd()+`
`:d=d.trimEnd()+"  "}),d=d.trim()+`
`,d},W=(e,r,t,i,s=!1)=>{var b,c;const u=t("azotaFormatExplanationSolutionMarker"),p=t("azotaFormatExplanationMethodMarker"),f=e.explanation.split(u),d=((b=f[0])==null?void 0:b.replace(p,"").trim())||"",h=((c=f[1])==null?void 0:c.trim())||(d?"":e.explanation.trim());let g=`${t("azotaFormatQuestionPrefix")} ${r} (${i}):
`;if(d&&(g+=`${t("azotaFormatExplanationMethod")} ${d}
`),g+=`${t("azotaFormatExplanationSolution")} ${h||t("resultsNoExplanation")}
`,s){const n=e.options.findIndex(o=>o===e.correctAnswer);n!==-1&&(g+=`${t("azotaFormatChooseAnswer")} ${L(n)}
`)}return g},Se=(e,r)=>{var f;let t="";const i=C((f=e.config)==null?void 0:f.difficulty);let s=1;e.questions.length>0&&(t+=`${r("azotaFormatMCQSection")}
`,e.questions.forEach(d=>{t+=P(d,s++,r,i),t+=`
`})),t+=`${r("azotaFormatEndOfQuiz")}
`,t+=`${r("azotaFormatAnswerTableTitle")}
`;let u=1;e.questions.forEach(d=>{const h=d.options.findIndex(g=>g===d.correctAnswer);h!==-1&&(t+=`${u++}${L(h)} `)}),t=t.trim()+`

`,t+=`${r("azotaFormatExplanationSectionTitle")}
`;let p=1;return e.questions.forEach(d=>{var h;t+=W(d,p++,r,C((h=e.config)==null?void 0:h.difficulty)),t+=`
`}),t},je=(e,r)=>{var u;let t="";const i=C((u=e.config)==null?void 0:u.difficulty);let s=1;return e.questions.length>0&&(t+=`${r("azotaFormatMCQSection")}
`,e.questions.forEach(p=>{t+=P(p,s,r,i),t+=`${r("azotaFormatExplanationTitle")}
`,t+=W(p,s,r,i,!0),t+=`
`,s++})),t},Ae=(e,r)=>{var u;let t="";const i=C((u=e.config)==null?void 0:u.difficulty);let s=1;return e.questions.length>0&&(t+=`${r("azotaFormatMCQSection")}
`,e.questions.forEach(p=>{t+=P(p,s++,r,i,!0),t+=`
`})),t};q("en");const K={editableQuiz:null,originalQuiz:null,isLoading:!0,isSaving:!1,error:null,isDirty:!1,questionToDelete:null};function Oe(e,r){var t,i;switch(r.type){case"INIT_QUIZ_DATA":return{...K,editableQuiz:JSON.parse(JSON.stringify(r.payload.quiz)),originalQuiz:JSON.parse(JSON.stringify(r.payload.quiz)),isLoading:!1,isDirty:!1};case"SET_LOADING":return{...e,isLoading:r.payload};case"SET_ERROR":return{...e,error:r.payload,isSaving:!1};case"SET_SAVING":return{...e,isSaving:r.payload};case"UPDATE_QUIZ_TITLE":return e.editableQuiz?{...e,editableQuiz:{...e.editableQuiz,title:r.payload},isDirty:!0}:e;case"UPDATE_QUESTION":if(!e.editableQuiz)return e;const s=[...e.editableQuiz.questions];return s[r.payload.index]=r.payload.question,{...e,editableQuiz:{...e.editableQuiz,questions:s},isDirty:!0};case"ADD_QUESTION":if(!e.editableQuiz)return e;const u=q(r.payload.language),p={id:pe(),questionText:u("reviewNewQuestionDefaultText"),options:[u("reviewNewOptionDefault",{index:1}),u("reviewNewOptionDefault",{index:2})],correctAnswer:u("reviewNewOptionDefault",{index:1}),explanation:u("reviewNewExplanationDefaultText")};return{...e,editableQuiz:{...e.editableQuiz,questions:[...e.editableQuiz.questions,p]},isDirty:!0};case"REMOVE_QUESTION_REQUEST":return{...e,questionToDelete:{index:r.payload.index,questionId:r.payload.questionId}};case"REMOVE_QUESTION_CONFIRMED":if(!e.editableQuiz||e.editableQuiz.questions.length<=1){const d=((i=(t=e.editableQuiz)==null?void 0:t.config)==null?void 0:i.language)==="Vietnamese"?"vi":"en";return{...e,error:q(d)("reviewCannotSaveNoQuestions"),questionToDelete:null}}const f=e.editableQuiz.questions.filter((d,h)=>h!==r.payload.index);return{...e,editableQuiz:{...e.editableQuiz,questions:f},error:null,isDirty:!0,questionToDelete:null};case"CLEAR_QUESTION_TO_DELETE_REQUEST":return{...e,questionToDelete:null};case"RESET_QUIZ_STATE":return e.originalQuiz?{...e,editableQuiz:JSON.parse(JSON.stringify(e.originalQuiz)),isDirty:!1,error:null,questionToDelete:null}:e;default:return e}}const X=({isOpen:e,onClose:r,quiz:t})=>{const{t:i}=M(),[s,u]=y.useState("style1"),[p,f]=y.useState(""),[d,h]=y.useState(!1),[g,b]=y.useState(null);y.useEffect(()=>{if(e&&t){b(null);try{let x="";switch(s){case"style1":x=Se(t,i);break;case"style2":x=je(t,i);break;case"style4":x=Ae(t,i);break;default:x=i("azotaExportErrorGenerating")}f(x)}catch(x){w.error("Error formatting quiz for Azota:","AzotaExportModal",{quizId:t.id,format:s},x),f(i("azotaExportErrorGenerating")),b(x instanceof Error?x.message:String(x))}}},[e,t,s,i]);const c=()=>{navigator.clipboard.writeText(p).then(()=>{h(!0),setTimeout(()=>h(!1),2e3)}).catch(x=>{w.error("Failed to copy Azota text to clipboard","AzotaExportModal",void 0,x),alert(i("azotaExportErrorCopy"))})},n=()=>{const x=new Blob([p],{type:"text/plain;charset=utf-8"}),z=document.createElement("a");z.href=URL.createObjectURL(x);const N=t.title.replace(/[^a-z0-9_.-]/gi,"_").substring(0,50)||"quiz";z.download=`${N}_Azota_${s}.txt`,document.body.appendChild(z),z.click(),document.body.removeChild(z),w.info("Azota quiz downloaded","AzotaExportModal",{quizId:t.id,format:s,filename:z.download})},o=[{value:"style1",label:i("azotaExportFormatStyle1")},{value:"style2",label:i("azotaExportFormatStyle2")},{value:"style4",label:i("azotaExportFormatStyle4")}];return t?a.jsx(J,{isOpen:e,onClose:r,title:i("azotaExportTitle"),size:"3xl",children:a.jsxs("div",{className:"space-y-6",children:[a.jsx(H,{label:i("azotaExportSelectFormat"),options:o,value:s,onChange:x=>u(x.target.value)}),g&&a.jsxs("div",{role:"alert",className:"p-3 bg-red-500/20 border border-red-500/50 rounded-lg text-xs text-red-300",children:[a.jsxs("p",{children:[a.jsxs("strong",{children:[i("error"),":"]})," ",i("azotaExportErrorGenerating")]}),a.jsx("p",{className:"mt-1 text-red-400/80",children:g})]}),a.jsx(_,{value:p,readOnly:!0,rows:18,className:"text-xs font-mono !bg-slate-700/70 !border-slate-600 p-4 min-h-[360px] shadow-inner","aria-label":i("azotaExportPreviewArea")}),a.jsxs("div",{className:"flex flex-col sm:flex-row justify-end gap-3.5 pt-2",children:[a.jsx(E,{variant:"secondary",onClick:r,size:"md",children:i("close")}),a.jsxs(E,{variant:"outline",onClick:c,leftIcon:a.jsx(Ie,{className:"w-4 h-4"}),size:"md",className:"w-full sm:w-auto",disabled:!!g,children:[" ",i(d?"azotaExportCopied":"azotaExportCopy")," "]}),a.jsxs(E,{variant:"primary",onClick:n,leftIcon:a.jsx(Te,{className:"w-4 h-4"}),size:"md",className:"w-full sm:w-auto",disabled:!!g,children:[" ",i("azotaExportDownload")," "]})]})]})}):null};X.displayName="AzotaExportModal";const Y=({question:e,index:r,dispatch:t,animationDelayFactor:i})=>{const{t:s}=M(),u=y.useRef(null);Ne(u,{threshold:.1,freezeOnceVisible:!0});const p=e.options.map((c,n)=>({value:c,label:`${s("reviewOptionLabel",{index:n+1})}: ${c.length>30?c.substring(0,27)+"...":c}`}));p.length===0&&e.correctAnswer&&p.push({value:e.correctAnswer,label:e.correctAnswer});const f=(c,n)=>{t({type:"UPDATE_QUESTION",payload:{index:r,question:{...e,[c]:n}}})},d=(c,n)=>{const o=[...e.options];o[c]=n;let x=e.correctAnswer;e.correctAnswer===e.options[c]?x=n:!o.includes(e.correctAnswer)&&o.length>0?x=o[0]:o.length===0&&(x=""),t({type:"UPDATE_QUESTION",payload:{index:r,question:{...e,options:o,correctAnswer:x}}})},h=()=>{if(e.options.length>=5)return;const c=s("reviewNewOptionDefault",{index:e.options.length+1}),n=[...e.options,c];t({type:"UPDATE_QUESTION",payload:{index:r,question:{...e,options:n}}})},g=c=>{if(e.options.length<=2){alert(s("reviewErrorNotEnoughOptions",{id:""}).replace(" for question ID: {id}",""));return}const n=e.options[c],o=e.options.filter((z,N)=>N!==c);let x=e.correctAnswer;n===e.correctAnswer&&!o.includes(n)&&(x=o.length>0?o[0]:""),t({type:"UPDATE_QUESTION",payload:{index:r,question:{...e,options:o,correctAnswer:x}}})},b=()=>{t({type:"REMOVE_QUESTION_REQUEST",payload:{index:r,questionId:e.id}})};return a.jsx(le.div,{ref:u,className:"question-item-motion-wrapper",children:a.jsxs(R,{useGlassEffect:!0,className:"shadow-xl !rounded-2xl !border-slate-700/50",children:[a.jsxs("div",{className:"flex justify-between items-center mb-5 sm:mb-6",children:[a.jsx("h3",{className:"text-lg sm:text-xl font-semibold text-[var(--color-primary-accent)]",children:s("reviewQuestionLabel",{index:r+1})}),a.jsx(B,{content:s("reviewDeleteQuestionLabel"),placement:"left",children:a.jsx(E,{variant:"danger",size:"sm",onClick:b,className:"!p-2.5 rounded-lg shadow-md hover:shadow-[var(--color-danger-accent)]/50 bg-transparent","aria-label":s("reviewDeleteQuestionLabel"),children:a.jsx(V,{className:"w-4 h-4 text-[var(--color-danger-accent)]"})})})]}),a.jsxs("div",{className:"space-y-5 sm:space-y-6",children:[a.jsx(_,{label:a.jsx("span",{className:"font-medium text-[var(--color-text-primary)]",children:s("reviewQuestionTextLabel")}),value:e.questionText,onChange:c=>f("questionText",c.target.value),placeholder:s("reviewQuestionTextPlaceholder"),rows:3,className:"min-h-[80px] text-sm"}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-[var(--color-text-primary)] mb-2.5",children:s("reviewOptionsLabel")}),a.jsx("div",{className:"space-y-3.5",children:e.options.map((c,n)=>a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(Z,{id:`option-input-${e.id}-${n}`,value:c,onChange:o=>d(n,o.target.value),placeholder:s("reviewOptionPlaceholder",{index:n+1}),inputClassName:"text-sm !py-2.5",containerClassName:"flex-grow"}),e.options.length>2&&a.jsx(B,{content:s("reviewRemoveOptionLabel"),placement:"right",children:a.jsx(E,{variant:"ghost",size:"sm",onClick:()=>g(n),className:"!p-2.5 rounded-lg text-[var(--color-danger-accent)] hover:text-[var(--color-danger-accent)] hover:bg-[var(--color-danger-accent)]/10 bg-transparent","aria-label":s("reviewRemoveOptionLabel"),children:a.jsx(V,{className:"w-4 h-4"})})})]},n))}),e.options.length<5&&a.jsx(E,{variant:"outline",size:"sm",onClick:h,leftIcon:a.jsx(Qe,{className:"w-4 h-4",strokeWidth:2}),className:"mt-4 py-2 px-4 rounded-lg border-dashed border-[var(--color-primary-accent)] text-[var(--color-primary-accent)] hover:bg-[var(--color-primary-accent)]/15 hover:border-[var(--color-primary-accent)]",children:s("reviewAddOption")})]}),a.jsx(H,{label:a.jsx("span",{className:"font-medium text-[var(--color-text-primary)]",children:s("reviewCorrectAnswerLabel")}),value:e.correctAnswer,onChange:c=>f("correctAnswer",c.target.value),options:p.length>0?p:[{value:"",label:"Please add options"}],disabled:p.length===0,className:"text-sm"}),a.jsx(_,{label:a.jsx("span",{className:"font-medium text-[var(--color-text-primary)]",children:s("reviewExplanationLabel")}),value:e.explanation,onChange:c=>f("explanation",c.target.value),placeholder:s("reviewExplanationPlaceholder"),rows:3,className:"min-h-[80px] text-sm"})]})]})})};Y.displayName="QuestionItem";const De=()=>{const e=ce(),r=de(),{t,language:i}=M(),{addQuiz:s,updateQuiz:u,quizzes:p,currentUser:f}=xe(),{notification:d,showSuccess:h,showError:g,clearNotification:b}=me(),[c,n]=y.useReducer(Oe,K),{editableQuiz:o,isLoading:x,isSaving:z,error:N,questionToDelete:j}=c,[U,k]=y.useState(!1),[T,ee]=y.useState(null),[Q,A]=y.useState({isOpen:!1,questionIndex:null,questionId:null}),{quizId:I}=ue();y.useEffect(()=>{var D;w.info("QuizReviewPage: Initializing or location state changed.","QuizReviewPage",{hasLocationState:!!e.state,existingQuizIdFromParams:I}),n({type:"SET_LOADING",payload:!0});let l=null;e.state&&(l=e.state);const v=I||((D=l==null?void 0:l.existingQuiz)==null?void 0:D.id);let m=null;if(v){if(m=(l==null?void 0:l.existingQuiz)||p.find(S=>S.id===v)||null,!m){w.error("Quiz not found for editing.","QuizReviewPage",{existingQuizId:v}),n({type:"SET_ERROR",payload:t("reviewErrorQuizNotFound")}),n({type:"SET_LOADING",payload:!1});return}w.info("Loading existing quiz for review/edit.","QuizReviewPage",{quizId:m.id})}else if(l!=null&&l.generatedQuizData&&l.finalConfig){const{generatedQuizData:S,quizTitleSuggestion:ie,finalConfig:se}=l,F=new Date().toISOString();m={id:$(),title:ie||S.title||t("untitledQuiz"),questions:S.questions,config:se,sourceContentSnippet:S.sourceContentSnippet,createdAt:F,lastModified:F},w.info("Initializing review page with newly generated quiz data.","QuizReviewPage",{title:m.title})}m?n({type:"INIT_QUIZ_DATA",payload:{quiz:m,language:i}}):I||(w.warn("No quiz data provided to review page.","QuizReviewPage"),n({type:"SET_ERROR",payload:t("reviewErrorNoQuizData")}),n({type:"SET_LOADING",payload:!1}))},[e.state,I,p,t,i,n]),y.useEffect(()=>{if(T&&o){if(o.questions.find(v=>v.id===T.questionId)){const v=`option-input-${T.questionId}-${T.optionIndex}`,m=document.getElementById(v);m==null||m.focus()}ee(null)}},[T,o]),y.useEffect(()=>{j&&A({isOpen:!0,questionIndex:j.index,questionId:j.questionId})},[j]);const te=l=>{n({type:"UPDATE_QUIZ_TITLE",payload:l})},ae=()=>{n({type:"ADD_QUESTION",payload:{language:i}}),w.info("Added new question to quiz being reviewed.","QuizReviewPage")},oe=async()=>{if(!o||Q.questionIndex===null||Q.questionId===null)return;const l=Q.questionIndex;A({isOpen:!1,questionIndex:null,questionId:null});const v={...o,questions:o.questions.filter((m,D)=>D!==l),lastModified:new Date().toISOString()};n({type:"REMOVE_QUESTION_CONFIRMED",payload:{index:l}});try{I?await u(v):await u(v),w.info("Question deleted and quiz updated","QuizReviewPage",{quizId:v.id,questionId:Q.questionId,remainingQuestions:v.questions.length}),h(t("questionDeletedSuccessfully"),3e3)}catch(m){w.error("Error saving quiz after question deletion","QuizReviewPage",{quizId:v.id,questionId:Q.questionId},m),g(t("reviewErrorSaving"),5e3),n({type:"INIT_QUIZ_DATA",payload:{quiz:o,language:i}})}},re=async()=>{if(!o||o.questions.length===0){n({type:"SET_ERROR",payload:t("reviewCannotSaveNoQuestions")}),w.warn("Attempted to save quiz with no questions.","QuizReviewPage",{quizId:o==null?void 0:o.id});return}if(!f){n({type:"SET_ERROR",payload:t("reviewErrorRequiresLogin")}),w.warn("Attempted to save quiz without authentication.","QuizReviewPage",{quizId:o==null?void 0:o.id}),g(t("reviewErrorRequiresLogin"),5e3);return}for(const l of o.questions){if(!l.questionText.trim()){n({type:"SET_ERROR",payload:t("reviewErrorEmptyQuestionText",{id:l.id.substring(0,8)})});return}if(l.options.length<2){n({type:"SET_ERROR",payload:t("reviewErrorNotEnoughOptions",{id:l.id.substring(0,8)})});return}if(!l.correctAnswer||!l.options.includes(l.correctAnswer)){n({type:"SET_ERROR",payload:t("reviewErrorInvalidCorrectAnswer",{id:l.id.substring(0,8)})});return}if(!l.explanation.trim()){n({type:"SET_ERROR",payload:t("reviewErrorEmptyExplanation",{id:l.id.substring(0,8)})});return}}n({type:"SET_ERROR",payload:null}),n({type:"SET_SAVING",payload:!0});try{const l=new Date().toISOString();let v=I||o.id;v||(v=$());const m={...o,id:v,title:o.title.trim()||t("untitledQuiz"),createdAt:o.createdAt||l,lastModified:l,config:o.config||{numQuestions:o.questions.length,difficulty:"Medium",language:i==="vi"?"Vietnamese":"English",customUserPrompt:"",selectedModel:be}};w.info("Attempting to save quiz...","QuizReviewPage",{quizId:m.id,title:m.title,questionCount:m.questions.length}),I?await u(m):await s(m),w.info("Quiz saved successfully. Navigating to dashboard.","QuizReviewPage",{quizId:m.id}),r("/dashboard")}catch(l){w.error("Error saving quiz","QuizReviewPage",{quizId:o==null?void 0:o.id},l),n({type:"SET_ERROR",payload:t("reviewErrorSaving")})}finally{n({type:"SET_SAVING",payload:!1})}},ne=y.useCallback(()=>k(!1),[]);if(x)return a.jsx(fe,{text:t("loading"),className:"mt-24",size:"xl"});if(N&&!o&&!z)return a.jsx(R,{className:"text-[var(--color-danger-accent)] p-12 text-center shadow-xl !border-[var(--color-danger-accent)]/70 !bg-[var(--color-danger-accent)]/10 text-lg font-semibold !rounded-2xl animate-fadeInUp",useGlassEffect:!0,children:N});if(!o)return a.jsx(R,{className:"text-[var(--color-text-muted)] p-12 text-center shadow-lg text-lg font-medium !rounded-2xl animate-fadeInUp",useGlassEffect:!0,children:t("reviewErrorNoQuizData")});const O=!!I;return a.jsxs("div",{className:"pb-16",children:[a.jsx(ge,{notification:d,onClose:b}),a.jsx("div",{className:"sticky-review-actions bg-[var(--color-bg-surface-2)] shadow-xl py-4 -mx-4 sm:-mx-6 lg:-mx-8 rounded-b-2xl border-b border-[var(--color-border-default)] animate-fadeInUp",children:a.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8",children:[a.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-center gap-4",children:[a.jsx("h1",{className:"text-xl sm:text-2xl font-bold text-[var(--color-text-primary)] leading-tight truncate tracking-tight flex items-center",title:o.title,children:a.jsx(G,{text:t(O?"reviewEditQuizTitle":"reviewFinalizeQuizTitle"),markdownFormatting:!0})}),a.jsxs("div",{className:"flex flex-wrap justify-center sm:justify-end items-center gap-2.5",children:[!O&&a.jsxs(E,{variant:"outline",size:"sm",onClick:()=>r("/create"),leftIcon:a.jsx(ve,{className:"w-4 h-4"}),children:[" ",t("reviewDiscardRegenerateShort")," "]}),a.jsxs(E,{variant:"secondary",size:"sm",onClick:()=>r("/dashboard"),leftIcon:a.jsx(he,{className:"w-4 h-4"}),children:[" ",t(O?"cancel":"reviewDiscardToDashboardShort")," "]}),a.jsxs(E,{variant:"outline",size:"sm",onClick:()=>k(!0),leftIcon:a.jsx(we,{className:"w-4 h-4"}),className:"border-[var(--color-primary-accent)] text-[var(--color-primary-accent)] hover:bg-[var(--color-primary-accent)]/15",disabled:!o||o.questions.length===0,children:[" ",t("azotaExportButton")," "]}),a.jsxs(E,{variant:"primary",size:"sm",onClick:re,isLoading:z,disabled:z||!o.questions.length,leftIcon:a.jsx(ye,{className:"w-4 h-4"}),className:"bg-gradient-to-r from-green-500 to-teal-500 hover:from-green-600 hover:to-teal-600 text-white",children:[" ",t(z?"reviewSavingButton":O?"reviewSaveChangesButton":"reviewSaveButton")," "]})]})]}),N&&a.jsx("p",{role:"alert",className:"text-xs text-[var(--color-danger-accent)] mt-4 bg-[var(--color-danger-accent)]/10 p-3 rounded-lg text-center sm:text-left shadow animate-fadeIn",children:N}),o&&!o.questions.length&&a.jsx("p",{role:"alert",className:"text-xs text-[var(--color-warning-accent)] mt-4 bg-[var(--color-warning-accent)]/20 p-3 rounded-lg text-center sm:text-left shadow animate-fadeIn",children:t("reviewCannotSaveNoQuestions")})]})}),a.jsxs("div",{className:"pt-6 sm:pt-8",children:[a.jsxs(R,{useGlassEffect:!0,className:"shadow-xl !rounded-2xl !border-slate-700/50 mb-6 sm:mb-8",children:[a.jsx(Z,{label:a.jsx("p",{className:"text-lg font-semibold text-[var(--color-text-primary)]",children:t("reviewQuizTitleLabel")}),value:o.title,onChange:l=>te(l.target.value),placeholder:t("step2QuizTitlePlaceholder"),inputClassName:"text-xl py-3.5",containerClassName:"mb-2"}),o.sourceContentSnippet&&a.jsxs("details",{className:"mt-4",children:[a.jsxs("summary",{className:"text-xs text-[var(--color-text-muted)] cursor-pointer hover:text-[var(--color-primary-accent)] flex items-center font-semibold group transition-colors var(--duration-fast) var(--ease-ios)",children:[a.jsx(Ee,{className:"w-4 h-4 mr-2.5 text-[var(--color-text-secondary)] group-hover:text-[var(--color-primary-accent)] transition-colors var(--duration-fast) var(--ease-ios)",strokeWidth:2}),t("resultsViewSourceSnippet")]}),a.jsx("blockquote",{className:"mt-3 text-xs text-[var(--color-text-muted)]/80 max-h-24 overflow-y-auto p-3 bg-[var(--color-bg-surface-2)] border border-[var(--color-border-default)] rounded-lg shadow-inner italic",children:a.jsx(G,{text:o.sourceContentSnippet,markdownFormatting:!0})})]})]}),a.jsx("div",{className:"space-y-6 sm:space-y-8",children:o.questions.map((l,v)=>a.jsx(Y,{question:l,index:v,dispatch:n,animationDelayFactor:v},l.id))})]}),a.jsx("div",{className:"mt-10 sm:mt-12 text-center",children:a.jsx(E,{variant:"subtle",onClick:ae,leftIcon:a.jsx(ze,{className:"w-5 h-5"}),className:"border-2 border-dashed border-[var(--color-primary-accent)] hover:border-[var(--color-primary-accent)]/80 text-[var(--color-primary-accent)] hover:text-[var(--color-primary-accent)] py-3 px-6 rounded-xl shadow-lg hover:shadow-black/20",children:t("reviewAddNewQuestion")})}),o&&U&&a.jsx(X,{isOpen:U,onClose:ne,quiz:o}),Q.isOpen&&a.jsx(J,{isOpen:Q.isOpen,onClose:()=>A({isOpen:!1,questionIndex:null,questionId:null}),title:t("confirmDeletionTitle"),size:"md",footerContent:a.jsxs("div",{className:"flex justify-end gap-3.5",children:[a.jsx(E,{variant:"secondary",onClick:()=>A({isOpen:!1,questionIndex:null,questionId:null}),size:"md",children:t("cancel")}),a.jsx(E,{variant:"danger",onClick:oe,size:"md",children:t("confirmDeleteButton")})]}),children:a.jsx("p",{className:"text-[var(--color-text-primary)] text-base leading-relaxed",children:t("reviewDeleteQuestionConfirmationMessage",{questionIndex:(Q.questionIndex??0)+1})})})]})};De.displayName="QuizReviewPage";export{De as default};
