const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/services-BHj8px4z.js","assets/service-supabase-wASzC9XA.js","assets/app-components-CFPFxe5x.js","assets/core-react-DcE6uGcR.js","assets/katex-core-BbYO2yyT.js","assets/katex-extras-AZS8NW-4.js","assets/katex-extras-Z53fddTf.css","assets/google-services-Bc_loC93.js","assets/router-Dk7yDelZ.js","assets/feature-quiz-home-Ch5jepSG.js","assets/feature-quiz-components-CChsAlA6.js","assets/ui-framework-CdNWeEQR.js","assets/feature-quiz-dashboard-C8yrEGC7.js","assets/markdown-processors-D3jN8hOQ.js","assets/react-markdown-Cej2CoYR.js","assets/app-components-CL2IDdOq.css","assets/markdown-styles-T-m_OsNd.css","assets/feature-quiz-sharedquiz-Clu9xfzS.js","assets/feature-quiz-2SquOiTn.js","assets/util-storage-UFVse9kk.js","assets/util-document-Dv5rbOR1.js","assets/util-pdf-CkIVnOzu.js"])))=>i.map(i=>d[i]);
import{u as e,a as t,G as s,s as a,C as r,f as l,t as i,v as o,w as n,B as c,j as m,r as d,T as u,I as x,h as p,x as h,p as g,o as f,M as v,d as b,y as j}from"./app-components-CFPFxe5x.js";import{r as y,j as w,R as N}from"./core-react-DcE6uGcR.js";import{l as I,f as z,g as P,h as Q,i as A,j as C}from"./services-BHj8px4z.js";import{m as k,A as E}from"./ui-framework-CdNWeEQR.js";import{a as S}from"./router-Dk7yDelZ.js";import"./katex-core-BbYO2yyT.js";import"./katex-extras-AZS8NW-4.js";import"./service-supabase-wASzC9XA.js";import"./google-services-Bc_loC93.js";/* empty css                        */import"./feature-quiz-home-Ch5jepSG.js";import"./feature-quiz-components-CChsAlA6.js";import"./feature-quiz-dashboard-C8yrEGC7.js";import"./markdown-processors-D3jN8hOQ.js";import"./react-markdown-Cej2CoYR.js";import"./feature-quiz-sharedquiz-Clu9xfzS.js";import"./feature-quiz-2SquOiTn.js";import"./util-storage-UFVse9kk.js";import"./util-document-Dv5rbOR1.js";import"./util-pdf-CkIVnOzu.js";const T="quizAICreationTimestamps_unauth",L=[.25,.1,.25,1],M=({icon:e,label:t,value:s,iconClassName:a="text-[var(--color-primary-accent)]"})=>w.jsxs("div",{className:"flex items-start py-2.5",children:[w.jsx("span",{className:`mr-3.5 mt-0.5 flex-shrink-0 ${a}`,children:e}),w.jsxs("div",{className:"flex-grow",children:[w.jsx("strong",{className:"text-[var(--color-text-primary)] font-medium block text-sm",children:t}),w.jsx("span",{className:"text-[var(--color-text-secondary)] text-sm leading-relaxed",children:s})]})]});M.displayName="SummaryItem";const F=()=>{const{language:F,currentUser:G}=e(),{t:D}=t(),q=S(),[$,_]=y.useState(1),[O,W]=y.useState([]),[U,V]=y.useState([]),[H,B]=y.useState(null),[R,Z]=y.useState(!1),[J,K]=y.useState({current:0,total:0}),[X,Y]=y.useState(""),[ee,te]=y.useState(null),[se,ae]=y.useState(null),[re,le]=y.useState(null),[ie,oe]=y.useState(""),[ne,ce]=y.useState(!1),[me,de]=y.useState(""),[ue,xe]=y.useState(!1),[pe,he]=y.useState(""),[ge,fe]=y.useState(!0),[ve,be]=y.useState("Medium"),[je,ye]=y.useState(10),[we,Ne]=y.useState({numQuestions:0,difficulty:"AI-Determined",language:"vi"===F?"Vietnamese":"English",selectedModel:s}),[Ie,ze]=y.useState(!1),[Pe,Qe]=y.useState(null),[Ae,Ce]=y.useState(0),[ke,Ee]=y.useState(""),[Se,Te]=y.useState(!1),[Le,Me]=y.useState(!1),Fe=e=>{Qe(e)};y.useEffect(()=>{Ne(e=>({...e,language:"vi"===F?"Vietnamese":"English",difficulty:ge?"AI-Determined":"AI-Determined"!==ve?ve:"Medium",numQuestions:ge?e.numQuestions:je>0?je:10,selectedModel:s}))},[F,ge,ve,je]),y.useEffect(()=>{window.scrollTo(0,0)},[$]),y.useEffect(()=>{ee&&"string"==typeof ee?a(()=>import("./services-BHj8px4z.js").then(e=>e.u),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21])).then(e=>{const t=e.isFormattedQuiz(ee);ce(t)}).catch(e=>{I.error("Error checking for formatted quiz","QuizCreatePage",void 0,e),ce(!1)}):ce(!1)},[ee]);const Ge=()=>!1,De=y.useCallback(async e=>{if(0===e.length)return W([]),Y(""),ae(null),V([]),B(null),te(null),le(null),void oe("");W(e),Y(""),ae(null),Z(!0),Fe(null),Ce(0),K({current:0,total:e.length}),oe((e=>{if(0===e.length)return"";if(1===e.length)return e[0].split(".").slice(0,-1).join(".")||e[0];let t="";const s=e[0].split(".").slice(0,-1).join(".")||e[0];let a=Math.min(...e.map(e=>(e.split(".").slice(0,-1).join(".")||e).length));a=Math.min(a,s.length);for(let r=0;r<a;r++){const a=s[r];if(!e.every(e=>(e.split(".").slice(0,-1).join(".")||e)[r]===a))break;t+=a}return t.replace(/[^a-zA-Z0-9\s_-]+$/,"").trim()})(e.map(e=>e.name))||D("step2MultipleFilesQuizTitle"));try{const t=[];let s="";for(let a=0;a<e.length;a++){const r=e[a];K({current:a+1,total:e.length});let l=null,i=!1;if("application/pdf"===r.type)l=await z(r);else if("application/vnd.openxmlformats-officedocument.wordprocessingml.document"===r.type||r.name.endsWith(".docx"))l=await P(r);else if(r.type.startsWith("image/")){i=!0;const t=await Q(r);1===e.length&&ae(t),Ge()||(l=await A(t)||D("step1ErrorProcessingFile")+` (${r.name} - AI could not extract text)`),1===e.length&&le(l)}else{if("text/plain"!==r.type&&!r.name.endsWith(".txt"))throw new Error(D("step1ErrorUnsupportedFile")+` (${r.name})`);l=await r.text()}l?(t.push({text:l,fileName:r.name}),s+=`=== [${r.name}] ===\n\n${l}\n\n`):i&&e.length>1&&(s+=`=== [${r.name}] ===\n\n[Image content - text extraction may have been skipped or failed]\n\n`)}const r=s.trim();V(t),B(r),te(r),a(()=>import("./services-BHj8px4z.js").then(e=>e.u),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21])).then(e=>{const t=e.isFormattedQuiz(r);ce(t),t&&Fe("✅ Quiz format detected! The system will preserve all questions and options exactly as provided.")}).catch(()=>ce(!1)),_(2)}catch(t){I.error("Error processing files:","QuizCreatePageFileProcessing",void 0,t),Fe(t instanceof Error?t.message:D("step1ErrorProcessingFile"))}finally{Z(!1),K({current:e.length,total:e.length})}},[D,Ge]),qe=y.useCallback(async()=>{if(X.trim()){const e=X.trim();W([]),V([]),B(null),ae(null),le(null),te(e),oe(D("step2PastedText")+" Quiz"),a(()=>import("./services-BHj8px4z.js").then(e=>e.u),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21])).then(t=>{const s=t.isFormattedQuiz(e);ce(s),Fe(s?"✅ Quiz format detected! The system will preserve your quiz exactly as provided.":null)}).catch(()=>{ce(!1),Fe(null)}),_(2)}else Fe(D("step1ErrorPasteText"))},[X,D]),$e=e=>{const{name:t,value:a}=e.target;if("numQuestions"===t){const t=e.target.value,s=parseInt(t,10),a=isNaN(s)||s<0?0:s;if(ge)Ne(e=>({...e,numQuestions:a}));else{const e=a<=0?1:a;Ne(t=>({...t,numQuestions:e})),ye(e)}}else if("difficulty"===t){const e=a;Ne(t=>({...t,difficulty:e,selectedModel:s})),ge||"AI-Determined"===e||be(e)}else Ne(e=>({...e,[t]:a,selectedModel:s}))},_e=y.useCallback(e=>{fe(e),e?("AI-Determined"!==we.difficulty&&be(we.difficulty),ye(e=>we.numQuestions>0?we.numQuestions:e),Ne(e=>({...e,difficulty:"AI-Determined",numQuestions:0}))):Ne(e=>({...e,difficulty:"AI-Determined"===ve?"Medium":ve,numQuestions:je>0?je:10}))},[we.difficulty,we.numQuestions,ve,je]),Oe=async()=>{if(I.info("Quiz generation initiated.","QuizCreatePageGenerate",{config:we}),!G){const e=Date.now()-864e5;let s=[];try{const e=localStorage.getItem(T);e&&(s=JSON.parse(e))}catch(t){I.error("Error reading unauth timestamps from localStorage","QuizCreateRateLimit",void 0,t),s=[]}if(s.filter(t=>t>e).length>=5)return Fe(D("rateLimitErrorUnauthenticated",{limit:5})),ze(!1),void Ce(0)}let e;if(ue&&me&&me.trim())e="Generate quiz from user prompt.";else if(O.length>0){if(!H||!H.trim())return se&&1===O.length&&O[0].type.startsWith("image/"),void Fe(D("step1ErrorProcessingFile"));e=H}else{if(!X||!X.trim())return void Fe(D("step1ErrorProcessingFile"));e=X}ze(!0),Fe(null),Ce(0),Ee(D("step3AIIsThinking"));for(let a=0;a<=2;a++)try{a>0&&(Ee(D("step3AIIsRetrying",{currentAttempt:a,maxAttempts:2})),await new Promise(e=>setTimeout(e,1500*a)));const s={...we,customUserPrompt:me.trim()||void 0};Ce(10+5*a);const r=C(e,s,ie);let l=setInterval(()=>{Ce(e=>e>=85-5*a?(clearInterval(l),e):Math.min(e+5,85-5*a))},400);const i=await r;if(clearInterval(l),Ce(95),!G){let e=[];try{const t=localStorage.getItem(T);t&&(e=JSON.parse(t))}catch(t){I.error("Error reading unauth timestamps for update","QuizCreateRateLimit",void 0,t),e=[]}const s=Date.now(),a=s-864e5,r=e.filter(e=>e>a);r.push(s);try{localStorage.setItem(T,JSON.stringify(r))}catch(t){I.error("Error writing unauth timestamps to localStorage","QuizCreateRateLimit",void 0,t)}}return I.info("Quiz generated successfully, navigating to review.","QuizCreatePageGenerate",{title:i.title}),q("/review",{state:{generatedQuizData:i,quizTitleSuggestion:ie||i.title,finalConfig:s}}),Ce(100),ze(!1),void Ee("")}catch(s){if(I.error(`Error generating quiz (Attempt ${a+1}/3):`,"QuizCreatePageGenerate",{config:we},s),!(s.message&&s.message.includes("Gemini AI failed to generate quiz")&&a<2))return Fe(s instanceof Error?s.message:D("step3ErrorGenerate")),Ce(0),ze(!1),void Ee("");1===a&&Ce(70)}},We=()=>{ee&&navigator.clipboard.writeText(ee).then(()=>{Me(!0),setTimeout(()=>Me(!1),2e3)}).catch(e=>{I.error("Failed to copy text to clipboard","QuizCreatePage",void 0,e),alert(D("azotaExportErrorCopy"))})},Ue=y.useCallback(()=>Te(!1),[]),Ve="https://img.icons8.com/?size=256&id=eoxMN35Z6JKg&format=png",He=(e,t,s,a,r=!1)=>{const l=e===t,i=e>t,o="text-[var(--color-text-muted)]";let n;const c="w-5 h-5 sm:w-6 sm:h-6 transition-transform var(--duration-fast) var(--ease-ios)";if(i)n=w.jsx("img",{src:"https://img.icons8.com/?size=256&id=VFaz7MkjAiu0&format=png",alt:D("stepCompleted"),className:c});else if(l){let e="";1===t?e="https://img.icons8.com/?size=256&id=hwKgsZN5Is2H&format=png":2===t?e="https://img.icons8.com/?size=256&id=WwHcZxa9PFUq&format=png":3===t&&(e=Ve),n=e?w.jsx("img",{src:e,alt:D(s),className:`${c} scale-110`}):N.isValidElement(a)?N.cloneElement(a,{className:`${c} scale-110`}):a}else n=N.isValidElement(a)?N.cloneElement(a,{className:c}):a;return w.jsxs("div",{className:`flex flex-col items-center transition-colors var(--duration-fast) var(--ease-ios) ${l?"text-[var(--color-primary-accent)]":i?"text-green-400":o}`,children:[w.jsxs("div",{className:`flex items-center justify-center w-10 h-10 sm:w-12 sm:h-12 rounded-full border-2 mb-2.5 transition-all var(--duration-fast) var(--ease-ios) will-change-transform, border, background-color, box-shadow ${l?"border-[var(--color-primary-accent)] bg-[var(--color-primary-accent)]/20 text-[var(--color-primary-accent)] shadow-xl scale-105":i?"border-green-400 bg-green-400/20 text-green-400 shadow-lg":`border-[var(--color-border-default)] bg-[var(--color-bg-surface-2)]/60 ${o}`} font-semibold text-base sm:text-lg`,children:[" ",n," "]}),w.jsx("span",{className:`text-xs sm:text-sm font-semibold text-center transition-colors var(--duration-fast) var(--ease-ios) ${l?"text-[var(--color-text-primary)]":i?"text-[var(--color-text-secondary)]":o}`,children:D(s)})]})};return w.jsxs("div",{className:"py-6 sm:py-8",children:[" ",w.jsxs(k.div,{className:"relative mb-10 sm:mb-12",initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.35,ease:L},children:[" ",w.jsxs("div",{className:"absolute inset-0 flex items-center","aria-hidden":"true",children:[" ",w.jsx("div",{className:"w-full border-t-2 border-[var(--color-border-default)]/60 border-dashed"})," "]})," ",w.jsxs("div",{className:"relative flex justify-center",children:[" ",w.jsxs("span",{className:"px-5 sm:px-6 bg-[var(--color-bg-body)] text-2xl sm:text-3xl font-bold text-[var(--color-text-primary)] tracking-tight",children:[" ",D("createQuiz")," "]})," "]})," "]})," ",w.jsxs(k.div,{className:"mb-8 sm:mb-10 text-center px-4",initial:{opacity:0},animate:{opacity:1},transition:{duration:.35,ease:L,delay:.1},children:[" ",w.jsxs("p",{className:"text-xs text-[var(--color-text-muted)]",children:[" ",D("rateLimitInfoUnauthenticated",{limit:5})," ",D("rateLimitInfoAuthenticated")," "]})," "]})," ",w.jsxs(k.div,{className:"max-w-lg mx-auto mb-12 sm:mb-16 flex justify-around items-start p-4 sm:p-5 bg-[var(--color-bg-surface-1)]/70 rounded-2xl shadow-xl border border-[var(--color-border-default)] glass-effect",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.4,ease:L,delay:.2},children:[" ",He($,1,"step1Title",w.jsx("img",{src:"https://img.icons8.com/?size=256&id=hwKgsZN5Is2H&format=png",alt:D("step1Title")}))," ",w.jsxs("div",{className:"flex-grow h-1.5 bg-[var(--color-bg-surface-3)] rounded-full mx-3 sm:mx-5 mt-5 sm:mt-[1.375rem]",children:[w.jsx("div",{className:"h-1.5 bg-[var(--color-primary-accent)] rounded-full transition-width var(--duration-normal) var(--ease-ios)",style:{width:1===$?"0%":2===$?"50%":"100%"}})," "]})," ",He($,2,"step2Title",w.jsx("img",{src:"https://img.icons8.com/?size=256&id=WwHcZxa9PFUq&format=png",alt:D("step2Title")}))," ",w.jsxs("div",{className:"flex-grow h-1.5 bg-[var(--color-bg-surface-3)] rounded-full mx-3 sm:mx-5 mt-5 sm:mt-[1.375rem]",children:[w.jsx("div",{className:"h-1.5 bg-[var(--color-primary-accent)] rounded-full transition-width var(--duration-normal) var(--ease-ios)",style:{width:$<=2?"0%":"100%"}})," "]})," ",He($,3,"step3Title",w.jsx("img",{src:Ve,alt:D("step3Title"),className:"w-5 h-5 sm:w-6 sm:h-6"}),!0)," "]})," ",w.jsxs(E,{mode:"wait",children:[" ",w.jsxs(k.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.4,ease:L},children:[" ",(()=>{switch($){case 1:return w.jsxs(r,{className:"max-w-xl mx-auto shadow-2xl !rounded-2xl",useGlassEffect:!0,children:[" ",w.jsxs("div",{className:"space-y-8",children:[w.jsx(j,{onFileUpload:De,acceptedFileTypes:".pdf,.txt,.docx,.jpg,.png,.jpeg",maxFileSizeMB:10,label:w.jsx("p",{className:"text-base font-semibold text-[var(--color-text-primary)] mb-2",children:D("step1UploadOrDrag")}),icon:w.jsx("img",{src:"https://img.icons8.com/?size=256&id=hwKgsZN5Is2H&format=png",alt:D("upload"),className:"w-12 h-12 sm:w-14 sm:h-14 mb-3.5 text-[var(--color-text-muted)] group-hover:text-[var(--color-primary-accent)] transition-all var(--duration-fast) var(--ease-ios) group-hover:scale-105"}),isLoading:R,currentFiles:O.length>0?O:null,multipleFiles:!0}),R&&w.jsxs("div",{className:"mt-4 animate-fadeIn",children:[w.jsx("div",{className:"flex items-center justify-between mb-1",children:w.jsx("span",{className:"text-xs text-[var(--color-text-secondary)]",children:D("step1ProcessingProgress",{current:J.current,total:J.total})})}),w.jsx(m,{progress:J.current/Math.max(1,J.total)*100,showPercentage:!1})]}),w.jsxs("div",{className:"relative flex py-1 items-center",children:[" ",w.jsx("div",{className:"flex-grow border-t border-[var(--color-border-default)]"})," ",w.jsx("span",{className:"flex-shrink mx-4 text-[var(--color-text-muted)] text-xs font-medium uppercase tracking-wider",children:D("step1Or")})," ",w.jsx("div",{className:"flex-grow border-t border-[var(--color-border-default)]"})," "]}),w.jsx(g,{label:w.jsx("p",{className:"text-base font-semibold text-[var(--color-text-primary)]",children:"AI Prompt"}),value:pe,onChange:e=>he(e.target.value),placeholder:D("step1AIPromptPlaceholder"),rows:6,className:"min-h-[150px] text-sm paste-text-area darkmode-textarea !bg-[var(--color-bg-surface-1)] !text-[var(--color-text-primary)]"}),w.jsx(c,{onClick:()=>{pe.trim()?(xe(!0),de(pe),Y(""),W([]),V([]),B(null),ae(null),le(null),te(`AI Prompt: ${pe.trim()}`),oe("AI Generated Quiz"),_(2)):Fe("Please enter an AI prompt")},disabled:!pe.trim()||R,fullWidth:!0,size:"lg",variant:"primary",className:"py-3 shadow-lg bg-gradient-to-r from-green-500 via-teal-500 to-sky-500 hover:from-green-600 hover:via-teal-600 hover:to-sky-600 text-white",children:"Generate Quiz from Prompt"}),w.jsxs("div",{className:"relative flex py-1 items-center",children:[" ",w.jsx("div",{className:"flex-grow border-t border-[var(--color-border-default)]"})," ",w.jsx("span",{className:"flex-shrink mx-4 text-[var(--color-text-muted)] text-xs font-medium uppercase tracking-wider",children:D("step1Or")})," ",w.jsx("div",{className:"flex-grow border-t border-[var(--color-border-default)]"})," "]}),w.jsx(g,{label:w.jsx("p",{className:"text-base font-semibold text-[var(--color-text-primary)]",children:D("step1PasteTextLabel")}),value:X,onChange:e=>Y(e.target.value),placeholder:D("step1PasteTextPlaceholder"),rows:6,className:"min-h-[150px] text-sm paste-text-area"}),w.jsxs(c,{onClick:qe,disabled:!X.trim()||R,fullWidth:!0,size:"lg",variant:"secondary",className:"py-3 shadow-lg",children:[" ",D("step1UsePastedText")," "]}),Pe&&!R&&w.jsx("div",{role:"alert",className:`p-3.5 ${Pe.startsWith("✅")?"bg-green-500/20 border-green-500/50 text-green-300":"bg-red-500/20 border-red-500/50 text-red-300"} border rounded-lg text-sm text-center shadow-md animate-fadeIn`,children:Pe})]})," "]});case 2:const e=w.jsxs("div",{className:"flex items-center text-sm font-semibold text-[var(--color-text-primary)]",children:[" ",w.jsx("img",{src:"https://www.pngall.com/wp-content/uploads/16/Google-Gemini-Logo-Transparent.png",alt:D("step2AIModelLabel"),className:"w-5 h-5 mr-2.5"})," ",D("step2AIModelLabel")," ",!1," "]}),t=w.jsxs("div",{className:"flex items-center text-sm font-medium text-[var(--color-text-secondary)]",children:[D("step2CustomPromptLabel"),w.jsx(u,{content:w.jsx("div",{className:"max-w-xs text-left text-xs",children:D("step2CustomPromptPlaceholder")}),placement:"top",children:w.jsx(n,{className:"w-4 h-4 text-[var(--color-text-muted)] ml-2.5 cursor-help"})})]}),s=[{value:"Easy",label:D("step2DifficultyEasy")},{value:"Medium",label:D("step2DifficultyMedium")},{value:"Hard",label:D("step2DifficultyHard")}],a=[...s,{value:"AI-Determined",label:D("step2DifficultyAIDetermined")}],y=D(ge?"step2NumQuestionsLabelAIMode":"step2NumQuestionsLabel");let N;return N=ue&&(null==ee?void 0:ee.startsWith("AI Prompt:"))?w.jsxs("div",{children:[w.jsx("span",{className:"text-blue-400 font-medium",children:"AI Prompt:"})," ",pe]}):O.length>0?1===O.length?w.jsxs("div",{children:[D(se?"step2Image":"step2File",{fileName:O[0].name}),ne&&w.jsx("div",{className:"mt-2 text-xs font-medium text-green-500",children:"✅ Quiz format detected! Questions will be preserved exactly as provided."})]}):w.jsxs(w.Fragment,{children:[D("step2MultipleFiles",{count:O.length}),":",w.jsxs("ul",{className:"list-none text-xs opacity-80 max-h-20 overflow-y-auto thin-scrollbar-horizontal",children:[O.slice(0,5).map((e,t)=>w.jsx("li",{className:"truncate",title:e.name,children:e.name},t)),O.length>5&&w.jsx("li",{children:D("step2AndMoreFiles",{count:O.length-5})})]}),ne&&w.jsx("div",{className:"mt-2 text-xs font-medium text-green-500",children:"✅ Quiz format detected! Questions will be preserved exactly as provided."})]}):X?w.jsxs("div",{children:[D("step2PastedText"),ne&&w.jsx("div",{className:"mt-2 text-xs font-medium text-green-500",children:"✅ Quiz format detected! Questions will be preserved exactly as provided."})]}):"N/A",w.jsxs(r,{className:"max-w-2xl mx-auto shadow-2xl !rounded-2xl",useGlassEffect:!0,children:[" ",w.jsxs("div",{className:"space-y-6 sm:space-y-8",children:[w.jsxs(r,{className:"!bg-[var(--color-bg-surface-2)]/70 !border-[var(--color-border-default)] p-4 sm:p-5 !rounded-xl shadow-lg",useGlassEffect:!1,children:[w.jsx("h3",{className:"text-sm font-semibold text-[var(--color-text-secondary)] mb-2.5",children:D("step2SourceContent")}),w.jsxs("div",{className:"flex items-center text-sm text-[var(--color-text-body)] overflow-x-auto overflow-y-hidden whitespace-nowrap cursor-default thin-scrollbar-horizontal py-0.5",children:[w.jsx(i,{className:"w-5 h-5 mr-3 text-[var(--color-primary-accent)] flex-shrink-0",strokeWidth:1.5}),w.jsx("span",{className:"pr-1",children:N})]}),ee&&w.jsxs(c,{variant:"secondary",onClick:()=>Te(!0),className:"text-xs !font-semibold mt-3.5 py-2 px-4 rounded-lg shadow-md",leftIcon:w.jsx(i,{className:"w-4 h-4",strokeWidth:2}),children:[" ",D("step2ViewFullText")," "]})]}),w.jsx(x,{label:w.jsx("p",{className:"text-base font-semibold text-[var(--color-text-primary)]",children:D("step2QuizTitleLabel")}),name:"quizTitle",value:ie,onChange:e=>oe(e.target.value),placeholder:D("step2QuizTitlePlaceholder"),inputClassName:"text-lg py-3"}),w.jsxs(r,{className:"!bg-[var(--color-bg-surface-2)]/70 !border-[var(--color-border-default)] p-4 sm:p-5 !rounded-xl shadow-lg",useGlassEffect:!1,children:[" ",e," ",w.jsxs("p",{className:"text-sm text-[var(--color-text-secondary)] mt-1.5",children:["Google Gemini ",w.jsx("span",{className:"font-medium",children:w.jsxs("span",{className:"text-green-400",children:["(",D("default"),")"]})})]})," "]}),w.jsxs(r,{className:"p-4 sm:p-5 !border-[var(--color-border-default)] !bg-[var(--color-bg-surface-1)]/70 shadow-lg space-y-5 !rounded-xl",useGlassEffect:!1,children:[w.jsx(p,{label:w.jsx("p",{className:"text-base font-semibold text-[var(--color-text-primary)]",children:D("step2AIModeLabel")}),checked:ge,onChange:_e}),w.jsx(x,{label:y,type:"number",name:"numQuestions",value:we.numQuestions,onChange:$e,min:ge?"0":"1",max:"50",containerClassName:ge?"mt-4":"",placeholder:ge&&0===we.numQuestions?D("step2NumQuestionsAIPlaceholder"):void 0}),w.jsx(h,{label:D("step2DifficultyLabel"),name:"difficulty",value:we.difficulty,onChange:$e,options:ge?a:s,disabled:ge}),w.jsx(h,{label:D("step2LanguageLabel"),name:"language",value:we.language,onChange:$e,options:[{value:"English",label:D("step2LanguageEnglish")},{value:"Vietnamese",label:D("step2LanguageVietnamese")}]})]}),w.jsx(g,{label:t,name:"customUserPrompt",value:me,onChange:e=>de(e.target.value),placeholder:D("step2CustomPromptPlaceholder").substring(0,60)+"...",rows:4,className:"min-h-[90px] text-sm"}),Pe&&w.jsx("div",{role:"alert",className:"p-3.5 bg-red-500/20 border border-red-500/50 rounded-lg text-sm text-red-300 text-center shadow-md animate-fadeIn",children:Pe}),w.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-center pt-5 gap-4",children:[w.jsxs(c,{variant:"outline",onClick:()=>{_(1),te(null),B(null),V([]),ae(null),W([]),Y(""),Fe(null),le(null)},leftIcon:w.jsx(d,{className:"w-4 h-4"}),size:"lg",className:"w-full sm:w-auto py-3",children:[" ",D("back")," "]}),w.jsxs(c,{onClick:()=>{_(3),Fe(null)},disabled:!1,rightIcon:w.jsx(f,{className:"w-4 h-4"}),variant:"primary",size:"lg",className:"w-full sm:w-auto py-3",children:[" ",D("step2NextButton")," "]})]})]}),Se&&w.jsx(v,{isOpen:Se,onClose:Ue,title:D("fullTextModalTitle"),size:"3xl",footerContent:w.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between items-center w-full gap-3 sm:gap-0",children:[" ",w.jsxs(c,{variant:"outline",onClick:We,leftIcon:w.jsx(b,{className:"w-4 h-4"}),size:"md",className:"w-full sm:w-auto",children:[" ",D(Le?"azotaExportCopied":"azotaExportCopy")," "]})," ",w.jsxs(c,{onClick:Ue,variant:"secondary",size:"md",className:"w-full sm:w-auto",children:[" ",D("close")," "]})," "]}),children:w.jsx(g,{value:ee||"",readOnly:!0,className:"!bg-[var(--color-bg-surface-2)] !border-[var(--color-border-default)] text-[var(--color-text-primary)] whitespace-pre-wrap text-sm min-h-[60vh] max-h-[65vh] shadow-inner focus:!border-[var(--color-primary-accent)]/70 focus:!ring-[var(--color-primary-accent)]/40",rows:20,"aria-label":D("fullTextModalTitle")})})," "]});case 3:const I="w-5 h-5";let z,P=D("step3GenerateButton");if(Ie){const e=ke.match(/Attempt (\d+)\/(\d+)/)||ke.match(/Lần (\d+)\/(\d+)/);if(e&&3===e.length){const t=parseInt(e[1],10),s=parseInt(e[2],10);P=D("step3GeneratingRetryButton",{currentAttempt:t,maxAttempts:s})}else P=D("step3GeneratingButton")}return z=ue?"AI Prompt":O.length>0?1===O.length?D(se?"step2Image":"step2File",{fileName:O[0].name}):D("step2MultipleFiles",{count:O.length}):X?D("step2PastedText"):"N/A",w.jsxs(r,{className:"max-w-xl mx-auto shadow-2xl !rounded-2xl",useGlassEffect:!0,children:[w.jsxs("div",{className:"!bg-[var(--color-bg-surface-2)]/70 p-6 sm:p-8 !rounded-xl mb-8 border border-[var(--color-border-default)] shadow-xl",children:[w.jsx("h3",{className:"text-2xl sm:text-3xl font-semibold text-[var(--color-text-primary)] mb-6 text-center",children:D("step3SummaryTitle")}),w.jsxs("div",{className:"space-y-1 divide-y divide-[var(--color-border-default)]/50",children:[w.jsx(M,{icon:w.jsx("img",{src:"https://www.pngall.com/wp-content/uploads/16/Google-Gemini-Logo-Transparent.png",alt:D("step2AIModelLabel"),className:I}),label:D("step3AIModelSelected",{modelName:""}),value:"Google Gemini"}),w.jsx(M,{icon:w.jsx(i,{className:I}),label:D("step3TitleSuggestion",{title:""}),value:w.jsx(l,{text:ie||D("step3TitleAISuggested")})}),w.jsx(M,{icon:w.jsx("img",{src:"https://img.icons8.com/?size=256&id=hwKgsZN5Is2H&format=png",alt:D("upload"),className:I}),label:D("step3ContentSource",{source:""}),value:z}),w.jsx(M,{icon:w.jsx("img",{src:"https://img.icons8.com/?size=256&id=WwHcZxa9PFUq&format=png",alt:D("settings"),className:I}),label:D("step3Mode",{mode:""}),value:ge?D("step3ModeAIOptimized"):"Manual"}),w.jsx(M,{icon:w.jsx("img",{src:"https://img.icons8.com/?size=256&id=PPnPJOpQpJ2J&format=png",alt:D("step3NumQuestions",{count:""}),className:I}),label:D("step3NumQuestions",{count:""}),value:ge&&0===we.numQuestions?D("step2NumQuestionsAIPlaceholder"):we.numQuestions}),w.jsx(M,{icon:w.jsx(o,{className:I}),label:D("step3Difficulty",{level:""}),value:"AI-Determined"===we.difficulty?D("step2DifficultyAIDetermined"):D(`step2Difficulty${we.difficulty}`)}),w.jsx(M,{icon:w.jsx("img",{src:"https://img.icons8.com/?size=48&id=fs8AdHsHlO36&format=png",alt:"Language",className:I}),label:D("step3Language",{lang:""}),value:"English"===we.language?D("step2LanguageEnglish"):D("step2LanguageVietnamese")}),w.jsx("div",{className:"pt-2.5",children:w.jsx(M,{icon:w.jsx(n,{className:I}),label:me.trim()?D("step3CustomPromptProvidedLabel"):D("step3CustomPromptNone"),value:me.trim()?w.jsx("blockquote",{className:"text-xs text-[var(--color-text-body)]/90 italic whitespace-pre-wrap max-h-24 overflow-y-auto bg-[var(--color-bg-surface-1)]/40 p-2 rounded-md mt-1 border-l-2 border-[var(--color-border-default)]/70",children:w.jsx(l,{text:me.trim()})}):""})})]})]}),w.jsxs(c,{onClick:Oe,isLoading:Ie,disabled:Ie,fullWidth:!0,size:"lg",variant:"primary",leftIcon:w.jsx("img",{src:Ve,alt:D("step3GenerateButton"),className:"w-5 h-5"}),className:"bg-gradient-to-r from-green-500 via-teal-500 to-sky-500 hover:from-green-600 hover:via-teal-600 hover:to-sky-600 text-white dark:text-white shadow-xl hover:shadow-green-500/40 py-3.5 rounded-xl",children:[" ",P," "]}),Ie&&w.jsx(m,{progress:Ae,label:ke||D("step3AIIsThinking"),className:"mt-6 animate-fadeIn"}),Pe&&!Ie&&w.jsx("div",{role:"alert",className:"mt-5 p-3.5 bg-red-500/20 border border-red-500/50 rounded-lg text-sm text-red-300 text-center shadow-md animate-fadeIn",children:Pe}),w.jsxs("div",{className:"mt-8 text-center",children:[" ",w.jsxs(c,{variant:"outline",onClick:()=>{_(2),Fe(null),Ee("")},leftIcon:w.jsx(d,{className:"w-4 h-4"}),size:"lg",className:"w-full sm:w-auto py-3",children:[" ",D("step3BackButtonCfg")," "]})," "]})]})}})()," "]},$)," "]})," "]})};F.displayName="QuizCreatePage";export{F as default};
