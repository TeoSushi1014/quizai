import{U as q,r as w,V as se,k as oe,i as k,h as re,A as le,l as v,j as i,E as de,C,W as ce,B as z,J as ue,N as pe,Y as xe,Z as fe,s as G,D as me,n as he,O as ge,x as B,c as we,$ as ye,m as ve,T as M,a0 as F,v as _,a1 as Ee,S as V,y as ze,a2 as be}from"./index-fFP91eYx.js";const R=e=>{if(!e)return"NB";switch(e){case"Easy":return"NB";case"Medium":return"TH";case"Hard":return"VD";case"AI-Determined":return"NB";default:return"NB"}},$=e=>String.fromCharCode(65+e),P=(e,a,t,s,o=!1)=>{const l=e.questionText;let d=s;const p=l.match(/\(?\[?([A-Z]{2,3})[\]\)]?\.?\s/i);p&&p[1]&&(d=p[1].toUpperCase());let u=`${t("azotaFormatQuestionPrefix")} ${a}.(${d}) ${l}
`;return e.options.forEach((m,y)=>{const b=m===e.correctAnswer;u+=`${o&&b?"*":""}${$(y)}. ${m}	`,(y+1)%2===0&&y<e.options.length-1&&e.options.length>2?u=u.trimEnd()+`
`:u=u.trimEnd()+"  "}),u=u.trim()+`
`,u},Z=(e,a,t,s,o=!1)=>{var m,y;const l=e.explanation.split("Cách giải:"),d=((m=l[0])==null?void 0:m.replace("Phương pháp:","").trim())||"",p=((y=l[1])==null?void 0:y.trim())||(d?"":e.explanation.trim());let u=`${t("azotaFormatQuestionPrefix")} ${a} (${s}):
`;if(d&&(u+=`${t("azotaFormatExplanationMethod")} ${d}
`),u+=`${t("azotaFormatExplanationSolution")} ${p||t("resultsNoExplanation")}
`,o){const b=e.options.findIndex(x=>x===e.correctAnswer);b!==-1&&(u+=`${t("azotaFormatChooseAnswer")} ${$(b)}
`)}return u},Ne=(e,a)=>{var p;let t="";const s=R((p=e.config)==null?void 0:p.difficulty);let o=1;e.questions.length>0&&(t+=`${a("azotaFormatMCQSection")}
`,e.questions.forEach(u=>{t+=P(u,o++,a,s),t+=`
`})),t+=`${a("azotaFormatEndOfQuiz")}
`,t+=`${a("azotaFormatAnswerTableTitle")}
`;let l=1;e.questions.forEach(u=>{const m=u.options.findIndex(y=>y===u.correctAnswer);m!==-1&&(t+=`${l++}${$(m)} `)}),t=t.trim()+`

`,t+=`${a("azotaFormatExplanationSectionTitle")}
`;let d=1;return e.questions.forEach(u=>{var m;t+=Z(u,d++,a,R((m=e.config)==null?void 0:m.difficulty)),t+=`
`}),t},Qe=(e,a)=>{var l;let t="";const s=R((l=e.config)==null?void 0:l.difficulty);let o=1;return e.questions.length>0&&(t+=`${a("azotaFormatMCQSection")}
`,e.questions.forEach(d=>{t+=P(d,o,a,s),t+=`${a("azotaFormatExplanationTitle")}
`,t+=Z(d,o,a,s,!0),t+=`
`,o++})),t},Ie=(e,a)=>{var l;let t="";const s=R((l=e.config)==null?void 0:l.difficulty);let o=1;return e.questions.length>0&&(t+=`${a("azotaFormatMCQSection")}
`,e.questions.forEach(d=>{t+=P(d,o++,a,s,!0),t+=`
`})),t};q("en");const J={editableQuiz:null,originalQuiz:null,isLoading:!0,isSaving:!1,error:null,isDirty:!1,questionToDelete:null};function Te(e,a){var t,s;switch(a.type){case"INIT_QUIZ_DATA":return{...J,editableQuiz:JSON.parse(JSON.stringify(a.payload.quiz)),originalQuiz:JSON.parse(JSON.stringify(a.payload.quiz)),isLoading:!1,isDirty:!1};case"SET_LOADING":return{...e,isLoading:a.payload};case"SET_ERROR":return{...e,error:a.payload,isSaving:!1};case"SET_SAVING":return{...e,isSaving:a.payload};case"UPDATE_QUIZ_TITLE":return e.editableQuiz?{...e,editableQuiz:{...e.editableQuiz,title:a.payload},isDirty:!0}:e;case"UPDATE_QUESTION":if(!e.editableQuiz)return e;const o=[...e.editableQuiz.questions];return o[a.payload.index]=a.payload.question,{...e,editableQuiz:{...e.editableQuiz,questions:o},isDirty:!0};case"ADD_QUESTION":if(!e.editableQuiz)return e;const l=q(a.payload.language),d={id:`manual-q-${Date.now()}`,questionText:l("reviewNewQuestionDefaultText"),options:[l("reviewNewOptionDefault",{index:1}),l("reviewNewOptionDefault",{index:2})],correctAnswer:l("reviewNewOptionDefault",{index:1}),explanation:l("reviewNewExplanationDefaultText")};return{...e,editableQuiz:{...e.editableQuiz,questions:[...e.editableQuiz.questions,d]},isDirty:!0};case"REMOVE_QUESTION_REQUEST":return{...e,questionToDelete:{index:a.payload.index,questionId:a.payload.questionId}};case"REMOVE_QUESTION_CONFIRMED":if(!e.editableQuiz||e.editableQuiz.questions.length<=1){const u=((s=(t=e.editableQuiz)==null?void 0:t.config)==null?void 0:s.language)==="Vietnamese"?"vi":"en";return{...e,error:q(u)("reviewCannotSaveNoQuestions"),questionToDelete:null}}const p=e.editableQuiz.questions.filter((u,m)=>m!==a.payload.index);return{...e,editableQuiz:{...e.editableQuiz,questions:p},error:null,isDirty:!0,questionToDelete:null};case"CLEAR_QUESTION_TO_DELETE_REQUEST":return{...e,questionToDelete:null};case"RESET_QUIZ_STATE":return e.originalQuiz?{...e,editableQuiz:JSON.parse(JSON.stringify(e.originalQuiz)),isDirty:!1,error:null,questionToDelete:null}:e;default:return e}}let Se=0;const je=()=>{const[e,a]=w.useState(null),t=w.useRef(null),s=w.useCallback(()=>{t.current&&(clearTimeout(t.current),t.current=null),a(null)},[]),o=w.useCallback((l,d,p=5e3,u)=>{s();const m=u||`notification-${Date.now()}-${Se++}`;a({type:l,message:d,key:m,duration:p}),t.current=setTimeout(()=>{s()},p)},[s]);return w.useEffect(()=>()=>{t.current&&clearTimeout(t.current)},[]),{notification:e,showError:(l,d,p)=>o("error",l,d,p),showSuccess:(l,d,p)=>o("success",l,d,p),showInfo:(l,d,p)=>o("info",l,d,p),showWarning:(l,d,p)=>o("warning",l,d,p),clearNotification:s}},W=({isOpen:e,onClose:a,quiz:t})=>{const{t:s}=k(),[o,l]=w.useState("style1"),[d,p]=w.useState(""),[u,m]=w.useState(!1),[y,b]=w.useState(null);w.useEffect(()=>{if(e&&t){b(null);try{let c="";switch(o){case"style1":c=Ne(t,s);break;case"style2":c=Qe(t,s);break;case"style4":c=Ie(t,s);break;default:c=s("azotaExportErrorGenerating")}p(c)}catch(c){v.error("Error formatting quiz for Azota:","AzotaExportModal",{quizId:t.id,format:o},c),p(s("azotaExportErrorGenerating")),b(c instanceof Error?c.message:String(c))}}},[e,t,o,s]);const x=()=>{navigator.clipboard.writeText(d).then(()=>{m(!0),setTimeout(()=>m(!1),2e3)}).catch(c=>{v.error("Failed to copy Azota text to clipboard","AzotaExportModal",void 0,c),alert(s("azotaExportErrorCopy"))})},n=()=>{const c=new Blob([d],{type:"text/plain;charset=utf-8"}),g=document.createElement("a");g.href=URL.createObjectURL(c);const I=t.title.replace(/[^a-z0-9_.-]/gi,"_").substring(0,50)||"quiz";g.download=`${I}_Azota_${o}.txt`,document.body.appendChild(g),g.click(),document.body.removeChild(g),v.info("Azota quiz downloaded","AzotaExportModal",{quizId:t.id,format:o,filename:g.download})},h=[{value:"style1",label:s("azotaExportFormatStyle1")},{value:"style2",label:s("azotaExportFormatStyle2")},{value:"style4",label:s("azotaExportFormatStyle4")}];return t?i.jsx(B,{isOpen:e,onClose:a,title:s("azotaExportTitle"),size:"3xl",children:i.jsxs("div",{className:"space-y-6",children:[i.jsx(V,{label:s("azotaExportSelectFormat"),options:h,value:o,onChange:c=>l(c.target.value)}),y&&i.jsxs("div",{role:"alert",className:"p-3 bg-red-500/20 border border-red-500/50 rounded-lg text-xs text-red-300",children:[i.jsxs("p",{children:[i.jsxs("strong",{children:[s("error"),":"]})," ",s("azotaExportErrorGenerating")]}),i.jsx("p",{className:"mt-1 text-red-400/80",children:y})]}),i.jsx(_,{value:d,readOnly:!0,rows:18,className:"text-xs font-mono !bg-slate-700/70 !border-slate-600 p-4 min-h-[360px] shadow-inner","aria-label":s("azotaExportPreviewArea")}),i.jsxs("div",{className:"flex flex-col sm:flex-row justify-end gap-3.5 pt-2",children:[i.jsx(z,{variant:"secondary",onClick:a,size:"md",children:s("close")}),i.jsxs(z,{variant:"outline",onClick:x,leftIcon:i.jsx(ze,{className:"w-4 h-4"}),size:"md",className:"w-full sm:w-auto",disabled:!!y,children:[" ",s(u?"azotaExportCopied":"azotaExportCopy")," "]}),i.jsxs(z,{variant:"primary",onClick:n,leftIcon:i.jsx(be,{className:"w-4 h-4"}),size:"md",className:"w-full sm:w-auto",disabled:!!y,children:[" ",s("azotaExportDownload")," "]})]})]})}):null};W.displayName="AzotaExportModal";const H=({question:e,index:a,dispatch:t,animationDelayFactor:s})=>{const{t:o}=k(),l=w.useRef(null),d=ye(l,{threshold:.1,freezeOnceVisible:!0}),p=e.options.map((n,h)=>({value:n,label:`${o("reviewOptionLabel",{index:h+1})}: ${n.length>30?n.substring(0,27)+"...":n}`}));p.length===0&&e.correctAnswer&&p.push({value:e.correctAnswer,label:e.correctAnswer});const u=(n,h)=>{t({type:"UPDATE_QUESTION",payload:{index:a,question:{...e,[n]:h}}})},m=(n,h)=>{const c=[...e.options];c[n]=h;let g=e.correctAnswer;e.correctAnswer===e.options[n]?g=h:!c.includes(e.correctAnswer)&&c.length>0?g=c[0]:c.length===0&&(g=""),t({type:"UPDATE_QUESTION",payload:{index:a,question:{...e,options:c,correctAnswer:g}}})},y=()=>{if(e.options.length>=5)return;const n=o("reviewNewOptionDefault",{index:e.options.length+1}),h=[...e.options,n];t({type:"UPDATE_QUESTION",payload:{index:a,question:{...e,options:h}}})},b=n=>{if(e.options.length<=2){alert(o("reviewErrorNotEnoughOptions",{id:""}).replace(" for question ID: {id}",""));return}const h=e.options[n],c=e.options.filter((I,j)=>j!==n);let g=e.correctAnswer;h===e.correctAnswer&&!c.includes(h)&&(g=c.length>0?c[0]:""),t({type:"UPDATE_QUESTION",payload:{index:a,question:{...e,options:c,correctAnswer:g}}})},x=()=>{t({type:"REMOVE_QUESTION_REQUEST",payload:{index:a,questionId:e.id}})};return i.jsx(ve.div,{ref:l,initial:{opacity:0,y:30},animate:d?{opacity:1,y:0}:{opacity:0,y:30},transition:{duration:.4,ease:[.25,.1,.25,1],delay:d?s*.07:0},className:"question-item-motion-wrapper",children:i.jsxs(C,{useGlassEffect:!0,className:"shadow-xl !rounded-2xl !border-slate-700/50",children:[i.jsxs("div",{className:"flex justify-between items-center mb-5 sm:mb-6",children:[i.jsx("h3",{className:"text-lg sm:text-xl font-semibold text-sky-300",children:o("reviewQuestionLabel",{index:a+1})}),i.jsx(M,{content:o("reviewDeleteQuestionLabel"),placement:"left",children:i.jsx(z,{variant:"danger",size:"sm",onClick:x,className:"!p-2.5 rounded-lg shadow-md hover:shadow-red-500/50","aria-label":o("reviewDeleteQuestionLabel"),children:i.jsx(F,{className:"w-4 h-4"})})})]}),i.jsxs("div",{className:"space-y-5 sm:space-y-6",children:[i.jsx(_,{label:i.jsx("span",{className:"font-medium text-slate-200",children:o("reviewQuestionTextLabel")}),value:e.questionText,onChange:n=>u("questionText",n.target.value),placeholder:o("reviewQuestionTextPlaceholder"),rows:3,className:"min-h-[80px] text-sm"}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-200 mb-2.5",children:o("reviewOptionsLabel")}),i.jsx("div",{className:"space-y-3.5",children:e.options.map((n,h)=>i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx(G,{id:`option-input-${e.id}-${h}`,value:n,onChange:c=>m(h,c.target.value),placeholder:o("reviewOptionPlaceholder",{index:h+1}),inputClassName:"text-sm !py-2.5",containerClassName:"flex-grow"}),e.options.length>2&&i.jsx(M,{content:o("reviewRemoveOptionLabel"),placement:"right",children:i.jsx(z,{variant:"ghost",size:"sm",onClick:()=>b(h),className:"!p-2.5 rounded-lg text-red-400/80 hover:text-red-400 hover:bg-red-400/15","aria-label":o("reviewRemoveOptionLabel"),children:i.jsx(F,{className:"w-4 h-4"})})})]},h))}),e.options.length<5&&i.jsx(z,{variant:"outline",size:"sm",onClick:y,leftIcon:i.jsx(Ee,{className:"w-4 h-4",strokeWidth:2}),className:"mt-4 py-2 px-4 rounded-lg border-dashed border-sky-400/70 text-sky-300 hover:bg-sky-400/15 hover:border-sky-400",children:o("reviewAddOption")})]}),i.jsx(V,{label:i.jsx("span",{className:"font-medium text-slate-200",children:o("reviewCorrectAnswerLabel")}),value:e.correctAnswer,onChange:n=>u("correctAnswer",n.target.value),options:p.length>0?p:[{value:"",label:"Please add options"}],disabled:p.length===0,className:"text-sm"}),i.jsx(_,{label:i.jsx("span",{className:"font-medium text-slate-200",children:o("reviewExplanationLabel")}),value:e.explanation,onChange:n=>u("explanation",n.target.value),placeholder:o("reviewExplanationPlaceholder"),rows:3,className:"min-h-[80px] text-sm"})]})]})})};H.displayName="QuestionItem";const Oe=()=>{const e=se(),a=oe(),{t,language:s}=k(),{addQuiz:o,updateQuiz:l,quizzes:d}=re(),{notification:p,showSuccess:u,showError:m,clearNotification:y}=je(),[b,x]=w.useReducer(Te,J),{editableQuiz:n,isLoading:h,isSaving:c,error:g,questionToDelete:I}=b,[j,U]=w.useState(!1),[T,K]=w.useState(null),[N,O]=w.useState({isOpen:!1,questionIndex:null,questionId:null}),{quizId:Q}=le();w.useEffect(()=>{var D;v.info("QuizReviewPage: Initializing or location state changed.","QuizReviewPage",{hasLocationState:!!e.state,existingQuizIdFromParams:Q}),x({type:"SET_LOADING",payload:!0});let r=null;e.state&&(r=e.state);const f=Q||((D=r==null?void 0:r.existingQuiz)==null?void 0:D.id);let E=null;if(f){if(E=(r==null?void 0:r.existingQuiz)||d.find(S=>S.id===f)||null,!E){v.error("Quiz not found for editing.","QuizReviewPage",{existingQuizId:f}),x({type:"SET_ERROR",payload:t("reviewErrorQuizNotFound")}),x({type:"SET_LOADING",payload:!1});return}v.info("Loading existing quiz for review/edit.","QuizReviewPage",{quizId:E.id})}else if(r!=null&&r.generatedQuizData&&r.finalConfig){const{generatedQuizData:S,quizTitleSuggestion:ne,finalConfig:ae}=r,L=new Date().toISOString();E={id:`new-quiz-${Date.now()}`,title:ne||S.title||t("untitledQuiz"),questions:S.questions,config:ae,sourceContentSnippet:S.sourceContentSnippet,createdAt:L,lastModified:L},v.info("Initializing review page with newly generated quiz data.","QuizReviewPage",{title:E.title})}E?x({type:"INIT_QUIZ_DATA",payload:{quiz:E,language:s}}):Q||(v.warn("No quiz data provided to review page.","QuizReviewPage"),x({type:"SET_ERROR",payload:t("reviewErrorNoQuizData")}),x({type:"SET_LOADING",payload:!1}))},[e.state,Q,d,t,s,x]),w.useEffect(()=>{if(T&&n){if(n.questions.find(f=>f.id===T.questionId)){const f=`option-input-${T.questionId}-${T.optionIndex}`,E=document.getElementById(f);E==null||E.focus()}K(null)}},[T,n]),w.useEffect(()=>{I&&O({isOpen:!0,questionIndex:I.index,questionId:I.questionId})},[I]);const Y=r=>{x({type:"UPDATE_QUIZ_TITLE",payload:r})},X=()=>{x({type:"ADD_QUESTION",payload:{language:s}}),v.info("Added new question to quiz being reviewed.","QuizReviewPage")},ee=async()=>{if(!n||N.questionIndex===null||N.questionId===null)return;const r=N.questionIndex;O({isOpen:!1,questionIndex:null,questionId:null});const f={...n,questions:n.questions.filter((E,D)=>D!==r),lastModified:new Date().toISOString()};x({type:"REMOVE_QUESTION_CONFIRMED",payload:{index:r}});try{Q?await l(f):await l(f),v.info("Question deleted and quiz updated","QuizReviewPage",{quizId:f.id,questionId:N.questionId,remainingQuestions:f.questions.length}),u(t("questionDeletedSuccessfully"),3e3)}catch(E){v.error("Error saving quiz after question deletion","QuizReviewPage",{quizId:f.id,questionId:N.questionId},E),m(t("reviewErrorSaving"),5e3),x({type:"INIT_QUIZ_DATA",payload:{quiz:n,language:s}})}},te=async()=>{if(!n||n.questions.length===0){x({type:"SET_ERROR",payload:t("reviewCannotSaveNoQuestions")}),v.warn("Attempted to save quiz with no questions.","QuizReviewPage",{quizId:n==null?void 0:n.id});return}for(const r of n.questions){if(!r.questionText.trim()){x({type:"SET_ERROR",payload:t("reviewErrorEmptyQuestionText",{id:r.id.substring(0,8)})});return}if(r.options.length<2){x({type:"SET_ERROR",payload:t("reviewErrorNotEnoughOptions",{id:r.id.substring(0,8)})});return}if(!r.correctAnswer||!r.options.includes(r.correctAnswer)){x({type:"SET_ERROR",payload:t("reviewErrorInvalidCorrectAnswer",{id:r.id.substring(0,8)})});return}if(!r.explanation.trim()){x({type:"SET_ERROR",payload:t("reviewErrorEmptyExplanation",{id:r.id.substring(0,8)})});return}}x({type:"SET_ERROR",payload:null}),x({type:"SET_SAVING",payload:!0});try{const r=new Date().toISOString(),f={...n,id:Q||n.id||`quiz-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,title:n.title.trim()||t("untitledQuiz"),createdAt:n.createdAt||r,lastModified:r,config:n.config||{numQuestions:n.questions.length,difficulty:"Medium",language:s==="vi"?"Vietnamese":"English",customUserPrompt:"",selectedModel:we}};v.info("Attempting to save quiz...","QuizReviewPage",{quizId:f.id,title:f.title,questionCount:f.questions.length}),Q?await l(f):await o(f),v.info("Quiz saved successfully. Navigating to dashboard.","QuizReviewPage",{quizId:f.id}),a("/dashboard")}catch(r){v.error("Error saving quiz","QuizReviewPage",{quizId:n==null?void 0:n.id},r),x({type:"SET_ERROR",payload:t("reviewErrorSaving")})}finally{x({type:"SET_SAVING",payload:!1})}},ie=w.useCallback(()=>U(!1),[]);if(h)return i.jsx(de,{text:t("loading"),className:"mt-24",size:"xl"});if(g&&!n&&!c)return i.jsx(C,{className:"text-red-400 p-12 text-center shadow-xl !border-red-500/70 !bg-red-800/40 text-lg font-semibold !rounded-2xl animate-fadeInUp",useGlassEffect:!0,children:g});if(!n)return i.jsx(C,{className:"text-slate-400 p-12 text-center shadow-lg text-lg font-medium !rounded-2xl animate-fadeInUp",useGlassEffect:!0,children:t("reviewErrorNoQuizData")});const A=!!Q;return i.jsxs("div",{className:"pb-16",children:[i.jsx(ce,{notification:p,onClose:y}),i.jsx("div",{className:"sticky-review-actions bg-slate-800 shadow-xl py-4 -mx-4 sm:-mx-6 lg:-mx-8 rounded-b-2xl border-b border-slate-700 animate-fadeInUp",children:i.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8",children:[i.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-center gap-4",children:[i.jsx("h1",{className:"text-xl sm:text-2xl font-bold text-slate-50 leading-tight truncate tracking-tight flex items-center",title:n.title,children:t(A?"reviewEditQuizTitle":"reviewFinalizeQuizTitle")}),i.jsxs("div",{className:"flex flex-wrap justify-center sm:justify-end items-center gap-2.5",children:[!A&&i.jsxs(z,{variant:"outline",size:"sm",onClick:()=>a("/create"),leftIcon:i.jsx(ue,{className:"w-4 h-4"}),className:"py-2.5 px-4 rounded-lg",children:[" ",t("reviewDiscardRegenerateShort")," "]}),i.jsxs(z,{variant:"secondary",size:"sm",onClick:()=>a("/dashboard"),leftIcon:i.jsx(pe,{className:"w-4 h-4"}),className:"py-2.5 px-4 rounded-lg",children:[" ",t(A?"cancel":"reviewDiscardToDashboardShort")," "]}),i.jsxs(z,{variant:"outline",size:"sm",onClick:()=>U(!0),leftIcon:i.jsx(xe,{className:"w-4 h-4"}),className:"py-2.5 px-4 rounded-lg border-sky-400/70 text-sky-300 hover:bg-sky-400/15",disabled:!n||n.questions.length===0,children:[" ",t("azotaExportButton")," "]}),i.jsxs(z,{variant:"primary",size:"sm",onClick:te,isLoading:c,disabled:c||!n.questions.length,leftIcon:i.jsx(fe,{className:"w-4 h-4"}),className:"bg-gradient-to-r from-green-500 to-teal-500 hover:from-green-600 hover:to-teal-600 text-white py-2.5 px-4 rounded-lg",children:[" ",t(c?"reviewSavingButton":A?"reviewSaveChangesButton":"reviewSaveButton")," "]})]})]}),g&&i.jsx("p",{role:"alert",className:"text-xs text-red-300 mt-4 bg-red-500/20 p-3 rounded-lg text-center sm:text-left shadow animate-fadeIn",children:g}),n&&!n.questions.length&&i.jsx("p",{role:"alert",className:"text-xs text-yellow-400 mt-4 bg-yellow-500/20 p-3 rounded-lg text-center sm:text-left shadow animate-fadeIn",children:t("reviewCannotSaveNoQuestions")})]})}),i.jsxs("div",{className:"pt-6 sm:pt-8",children:[i.jsxs(C,{useGlassEffect:!0,className:"shadow-xl !rounded-2xl !border-slate-700/50 mb-6 sm:mb-8",children:[i.jsx(G,{label:i.jsx("p",{className:"text-lg font-semibold text-slate-100",children:t("reviewQuizTitleLabel")}),value:n.title,onChange:r=>Y(r.target.value),placeholder:t("step2QuizTitlePlaceholder"),inputClassName:"text-xl py-3.5",containerClassName:"mb-2"}),n.sourceContentSnippet&&i.jsxs("details",{className:"mt-4",children:[i.jsxs("summary",{className:"text-xs text-slate-400 cursor-pointer hover:text-sky-300 flex items-center font-semibold group transition-colors var(--duration-fast) var(--ease-ios)",children:[i.jsx(me,{className:"w-4 h-4 mr-2.5 text-slate-500 group-hover:text-sky-400 transition-colors var(--duration-fast) var(--ease-ios)",strokeWidth:2}),t("resultsViewSourceSnippet")]}),i.jsx("blockquote",{className:"mt-3 text-xs text-slate-400/80 max-h-24 overflow-y-auto p-3 bg-slate-700/60 border border-slate-600/60 rounded-lg shadow-inner italic",children:i.jsx(he,{text:n.sourceContentSnippet})})]})]}),i.jsx("div",{className:"space-y-6 sm:space-y-8",children:n.questions.map((r,f)=>i.jsx(H,{question:r,index:f,dispatch:x,animationDelayFactor:f},r.id))})]}),i.jsx("div",{className:"mt-10 sm:mt-12 text-center",children:i.jsx(z,{variant:"subtle",onClick:X,leftIcon:i.jsx(ge,{className:"w-5 h-5"}),className:"border-2 border-dashed border-slate-600 hover:border-sky-400/80 text-slate-300 hover:text-sky-300 py-3 px-6 rounded-xl shadow-lg hover:shadow-black/20",children:t("reviewAddNewQuestion")})}),n&&j&&i.jsx(W,{isOpen:j,onClose:ie,quiz:n}),N.isOpen&&i.jsx(B,{isOpen:N.isOpen,onClose:()=>O({isOpen:!1,questionIndex:null,questionId:null}),title:t("confirmDeletionTitle"),size:"md",footerContent:i.jsxs("div",{className:"flex justify-end gap-3.5",children:[i.jsx(z,{variant:"secondary",onClick:()=>O({isOpen:!1,questionIndex:null,questionId:null}),size:"md",children:t("cancel")}),i.jsx(z,{variant:"danger",onClick:ee,size:"md",children:t("confirmDeleteButton")})]}),children:i.jsx("p",{className:"text-slate-200 text-base leading-relaxed",children:t("reviewDeleteQuestionConfirmationMessage",{questionIndex:(N.questionIndex??0)+1})})})]})};Oe.displayName="QuizReviewPage";export{Oe as default};
