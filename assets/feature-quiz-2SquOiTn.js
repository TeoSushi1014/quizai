import{b as e}from"./app-components-CFPFxe5x.js";function i(){return window.crypto&&window.crypto.randomUUID?window.crypto.randomUUID():"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){const i=16*Math.random()|0;return("x"===e?i:3&i|8).toString(16)})}function t(e){return/^[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(e)}function n(){const e=i();return t(e)?e:window.crypto&&window.crypto.randomUUID?window.crypto.randomUUID():"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){const i=16*Math.random()|0;return("x"===e?i:3&i|8).toString(16)})}function o(){const e=i();return t(e)?e:window.crypto&&window.crypto.randomUUID?window.crypto.randomUUID():"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){const i=16*Math.random()|0;return("x"===e?i:3&i|8).toString(16)})}const a=Object.freeze(Object.defineProperty({__proto__:null,generateQuestionId:o,generateQuizId:n,generateUUID:i,isValidUUID:t},Symbol.toStringTag,{value:"Module"}));e("en");const r={editableQuiz:null,originalQuiz:null,isLoading:!0,isSaving:!1,error:null,isDirty:!1,questionToDelete:null};function x(i,t){var n,a;switch(t.type){case"INIT_QUIZ_DATA":return{...r,editableQuiz:JSON.parse(JSON.stringify(t.payload.quiz)),originalQuiz:JSON.parse(JSON.stringify(t.payload.quiz)),isLoading:!1,isDirty:!1};case"SET_LOADING":return{...i,isLoading:t.payload};case"SET_ERROR":return{...i,error:t.payload,isSaving:!1};case"SET_SAVING":return{...i,isSaving:t.payload};case"UPDATE_QUIZ_TITLE":return i.editableQuiz?{...i,editableQuiz:{...i.editableQuiz,title:t.payload},isDirty:!0}:i;case"UPDATE_QUESTION":if(!i.editableQuiz)return i;const x=[...i.editableQuiz.questions];return x[t.payload.index]=t.payload.question,{...i,editableQuiz:{...i.editableQuiz,questions:x},isDirty:!0};case"ADD_QUESTION":if(!i.editableQuiz)return i;const u=e(t.payload.language),l={id:o(),questionText:u("reviewNewQuestionDefaultText"),options:[u("reviewNewOptionDefault",{index:1}),u("reviewNewOptionDefault",{index:2})],correctAnswer:u("reviewNewOptionDefault",{index:1}),explanation:u("reviewNewExplanationDefaultText")};return{...i,editableQuiz:{...i.editableQuiz,questions:[...i.editableQuiz.questions,l]},isDirty:!0};case"REMOVE_QUESTION_REQUEST":return{...i,questionToDelete:{index:t.payload.index,questionId:t.payload.questionId}};case"REMOVE_QUESTION_CONFIRMED":if(!i.editableQuiz||i.editableQuiz.questions.length<=1){const t="Vietnamese"===(null==(a=null==(n=i.editableQuiz)?void 0:n.config)?void 0:a.language)?"vi":"en";return{...i,error:e(t)("reviewCannotSaveNoQuestions"),questionToDelete:null}}const s=i.editableQuiz.questions.filter((e,i)=>i!==t.payload.index);return{...i,editableQuiz:{...i.editableQuiz,questions:s},error:null,isDirty:!0,questionToDelete:null};case"CLEAR_QUESTION_TO_DELETE_REQUEST":return{...i,questionToDelete:null};case"RESET_QUIZ_STATE":return i.originalQuiz?{...i,editableQuiz:JSON.parse(JSON.stringify(i.originalQuiz)),isDirty:!1,error:null,questionToDelete:null}:i;default:return i}}export{t as a,i as b,n as g,r as i,x as q,a as u};
